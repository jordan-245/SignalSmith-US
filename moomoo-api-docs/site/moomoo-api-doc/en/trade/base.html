<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Transaction Objects | moomoo API Doc v9.6</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="moomoo API Doc">
    <link rel="preload" href="/moomoo-api-doc/assets/css/0.styles.ea0b1d81.css" as="style"><link rel="preload" href="/moomoo-api-doc/assets/js/app.76d125c0.js" as="script"><link rel="preload" href="/moomoo-api-doc/assets/js/2.e1858e4a.js" as="script"><link rel="preload" href="/moomoo-api-doc/assets/js/86.f2975c25.js" as="script"><link rel="preload" href="/moomoo-api-doc/assets/js/28.3fe3716c.js" as="script"><link rel="preload" href="/moomoo-api-doc/assets/js/35.424be492.js" as="script"><link rel="preload" href="/moomoo-api-doc/assets/js/24.9af08641.js" as="script"><link rel="prefetch" href="/moomoo-api-doc/assets/js/10.94bcbf16.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/100.5aad709f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/101.6315f7fb.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/102.6cece76d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/103.40195fc5.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/104.e0830381.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/105.936eb4d9.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/106.ed3aee2b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/107.7748df13.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/108.39b67a60.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/109.4b1236e2.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/11.2fbf442f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/110.bc264581.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/111.a9652fa1.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/112.038c2fcd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/113.587f4a42.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/114.9203188f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/115.0d36e730.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/116.0f4b866f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/117.76221359.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/118.caa7bc9a.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/119.ba336510.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/12.c4851259.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/120.3683de14.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/121.ea95d7cb.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/122.618c3ed6.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/123.055b7010.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/124.c045cd63.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/125.d42b0714.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/126.b2f6e933.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/127.e9d110f8.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/128.a11f8202.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/129.6626eb94.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/13.4f3b3d7e.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/130.6539fcba.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/131.75bdf579.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/132.9d24d7e7.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/133.d9e1803b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/134.a475efd5.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/135.cc33709b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/136.21873923.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/137.69826660.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/138.31047450.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/139.ce995941.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/14.13b59c71.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/140.e70bdec0.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/141.d9d53a87.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/142.a04d0bea.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/143.a672978f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/144.818a84ae.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/145.e46cc3df.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/146.a29ec4b9.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/147.5cfe641e.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/148.358ecaa0.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/149.3935be2f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/15.3d02da17.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/150.40c46b61.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/151.3456807d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/152.308a6ffd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/153.d95721a5.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/154.c6b90cda.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/155.68c534de.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/156.fa6d7af3.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/157.a33831dd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/158.56280019.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/159.9b880f55.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/16.33d80555.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/160.f4aa9622.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/161.727a3a78.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/162.941951ea.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/163.8b7da111.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/164.dfd53e0d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/165.0c0855cd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/166.21bd9238.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/167.e4ae9cf3.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/168.3f4281c0.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/169.f37d7335.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/17.6ac2d3ef.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/170.4376c120.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/171.948e10e3.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/18.7deab3c8.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/19.6e70cac3.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/20.c1df6286.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/21.5647999f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/22.a50b564c.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/23.7870807e.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/25.f509878d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/26.b1244706.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/27.082f3f2b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/29.f69366ed.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/3.f9c39755.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/30.aee38619.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/31.7ab0c7db.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/32.d4a3260b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/33.74565b1d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/34.29135595.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/36.3857d105.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/37.7d889315.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/38.637a73c2.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/39.aa973d8f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/4.04d2c45d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/40.480f6bad.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/41.62d11f5f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/42.6861ed24.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/43.b8eb0308.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/44.e0fc8394.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/45.12015c46.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/46.acc698c7.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/47.997f18b2.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/48.c0a3ed4b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/49.605a98fa.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/5.8c452a45.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/50.ab8e902f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/51.93a43c80.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/52.d7c28131.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/53.bc4fcbfa.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/54.f2134ef8.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/55.0fb8c79f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/56.d6f1d66e.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/57.e3b3ea62.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/58.a3b791f0.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/59.15613da4.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/6.9a2ded1c.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/60.60f97ce5.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/61.adf5183d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/62.10e9e40e.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/63.f3768483.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/64.5e7093fb.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/65.437af457.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/66.fc1b6993.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/67.14953f01.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/68.5b8d5ad6.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/69.7f2d1c8b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/7.f1cb5afb.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/70.2cfa12e6.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/71.0acce1e8.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/72.74bec554.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/73.00d57d06.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/74.bbe2f552.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/75.654e7361.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/76.e7abbb6c.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/77.9c2ecdf1.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/78.3eaa2d23.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/79.cc7f1ac2.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/8.e457aac2.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/80.148805ce.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/81.40dc2530.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/82.bbe1f83f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/83.d1ecfd2c.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/84.5013f0ea.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/85.ed102602.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/87.7d6540bd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/88.6f722f70.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/89.8fed8c82.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/9.c9d4402a.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/90.a15edebc.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/91.1f997c5d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/92.dd51fa69.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/93.042545f6.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/94.71d9cc14.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/95.fb45f9d3.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/96.0f81a014.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/97.09768abd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/98.cc14b450.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/99.6d2cbe79.js">
    <link rel="stylesheet" href="/moomoo-api-doc/assets/css/0.styles.ea0b1d81.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/moomoo-api-doc/en/" class="home-link router-link-active"><img src="/moomoo-api-doc/img/logo.png" alt="moomoo API Doc v9.6" class="logo"> <span class="site-name can-hide">moomoo API Doc v9.6</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="ftcode-links can-hide"><div class="ftcode-item"><div class="ftcode-dropdown-wrapper"><button type="button" aria-label="Programming Language" class="ftcode-dropdown-title"><span class="title">Programming Language</span> <span class="arrow right"></span></button> <ul class="ftcode-dropdown" style="display:none;"><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link active"><span class="arrow active"></span> <span class="title active">Python</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">C#</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">Java</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">C++</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">JavaScript</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">proto</span></span></li></ul></div></div></nav> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="简体中文" class="dropdown-title"><span class="title">简体中文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/moomoo-api-doc/trade/base.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/moomoo-api-doc/en/trade/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="ftcode-links"><div class="ftcode-item"><div class="ftcode-dropdown-wrapper"><button type="button" aria-label="Programming Language" class="ftcode-dropdown-title"><span class="title">Programming Language</span> <span class="arrow right"></span></button> <ul class="ftcode-dropdown" style="display:none;"><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link active"><span class="arrow active"></span> <span class="title active">Python</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">C#</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">Java</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">C++</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">JavaScript</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">proto</span></span></li></ul></div></div></nav> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="简体中文" class="dropdown-title"><span class="title">简体中文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/moomoo-api-doc/trade/base.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/moomoo-api-doc/en/trade/base.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Quick Start</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>OpenD</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Quote API</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading openData"><span>Trade API</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/moomoo-api-doc/en/trade/overview.html" class="sidebar-link">Overview</a></li><li><a href="/moomoo-api-doc/en/trade/base.html" aria-current="page" class="active sidebar-link">Transaction Objects</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Accounts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Assets and Positions</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Orders</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Deals</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/moomoo-api-doc/en/trade/trade.html" class="sidebar-link">Trading Definitions</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Basic API</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Q&amp;A</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="8155"><a href="#8155" class="header-anchor">#</a> Transaction Objects</h1> <div class="ft-doc-switcher"><div class="tab-content" style="display:none;"><div class="ft-switcher"><div class="tab-header" style="display:none;"><ul><li class="active"> Python
            </li><li> Proto
            </li><li> C#
            </li><li> Java
            </li><li> C++
            </li><li> JavaScript
            </li></ul></div> <div class="tab-content" style="display:;"><h2 id="3490"><a href="#3490" class="header-anchor">#</a> Create the connection</h2> <p><code>OpenSecTradeContext(filter_trdmarket=TrdMarket.HK, host='127.0.0.1', port=11111, is_encrypt=None, security_firm=SecurityFirm.FUTUSECURITIES)</code></p> <p><code>OpenFutureTradeContext(host='127.0.0.1', port=11111, is_encrypt=None, security_firm=SecurityFirm.FUTUSECURITIES)</code></p> <ul><li><p><strong>Description</strong></p> <p>According to the transaction variaties, select a correct account, and create its transaction object.</p> <table><thead><tr><th style="text-align:left;">Transaction Objects</th> <th style="text-align:left;">Accounts</th></tr></thead> <tbody><tr><td style="text-align:left;">OpenSecTradeContext</td> <td style="text-align:left;">Securities account <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Trading stocks, ETFs, warrants, stock options or index options uses this account. </div></div></div></div></td></tr> <tr><td style="text-align:left;">OpenFutureTradeContext</td> <td style="text-align:left;">Futures account <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Trading futures or future options uses this account.</div></div></div></div></td></tr></tbody></table></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">filter_trdmarket</td> <td style="text-align:left;"><a href="/moomoo-api-doc/en/trade/trade.html#6257">TrdMarket</a></td> <td style="text-align:left;">Filter accounts according to the transaction market authority. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content"><ul><li>This parameter is only available for OpenSecTradeContext.</li><li>This parameter is only used to filter accounts and will not affect transaction connections.</li></ul></div></div></div></div></td></tr> <tr><td style="text-align:left;">host</td> <td style="text-align:left;">str</td> <td style="text-align:left;">The IP listened by OpenD.</td></tr> <tr><td style="text-align:left;">port</td> <td style="text-align:left;">int</td> <td style="text-align:left;">The port listened by OpenD.</td></tr> <tr><td style="text-align:left;">is_encrypt</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to enable encryption. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Default None means: use the setting of <a href="/moomoo-api-doc/en/ftapi/init.html#7910">enable_proto_encrypt</a>.</div></div></div></div></td></tr> <tr><td style="text-align:left;">security_firm</td> <td style="text-align:left;"><a href="/moomoo-api-doc/en/trade/trade.html#9434">SecurityFirm</a></td> <td style="text-align:left;">Specified security firm</td></tr></tbody></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> futu <span class="token keyword">import</span> <span class="token operator">*</span>
trd_ctx <span class="token operator">=</span> OpenSecTradeContext<span class="token punctuation">(</span>filter_trdmarket<span class="token operator">=</span>TrdMarket<span class="token punctuation">.</span>HK<span class="token punctuation">,</span> host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">11111</span><span class="token punctuation">,</span> is_encrypt<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> security_firm<span class="token operator">=</span>SecurityFirm<span class="token punctuation">.</span>FUTUSECURITIES<span class="token punctuation">)</span>
trd_ctx<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># After using the connection, remember to close it to prevent the number of connections from running out</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="1321"><a href="#1321" class="header-anchor">#</a> Close the connection</h2> <p><code>close()</code></p> <ul><li><p><strong>Description</strong></p> <p>Close the trading object. By default, the threads created inside the Futu API will prevent the process from exiting, and the process can exit normally only after all Contexts are closed. But through <a href="/moomoo-api-doc/en/ftapi/init.html#5242">set_all_thread_daemon</a>, all internal threads can be set as daemon threads. At this time, even if close of Context is not called, the process can exit normally.</p></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> futu <span class="token keyword">import</span> <span class="token operator">*</span>
trd_ctx <span class="token operator">=</span> OpenSecTradeContext<span class="token punctuation">(</span>filter_trdmarket<span class="token operator">=</span>TrdMarket<span class="token punctuation">.</span>HK<span class="token punctuation">,</span> host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">11111</span><span class="token punctuation">)</span>
trd_ctx<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># After using the connection, remember to close it to prevent the number of connections from running out</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="7613"><a href="#7613" class="header-anchor">#</a> InitConnect.proto</h2> <ul><li><p><strong>Description</strong></p> <p>Create transaction object and initialize transaction connection</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code><span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> clientVer <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//Client version number. clientVer = number before &quot;.&quot; * 100 + number after &quot;.&quot;. For example: clientVer = 1 * 100 + 1 = 101 for version 1.1 , and clientVer = 2 * 100 + 21 = 221 for version 2.21.</span>
    <span class="token keyword">required</span> <span class="token builtin">string</span> clientID <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//The unique identifier for client, no specific generation rules, the client can guarantee the uniqueness</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> recvNotify <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//Whether this connection receives notifications of market status or events that transaction needs to be re-unlocked. If True, OpenD will push these notifications to this connection, otherwise false means not receiving or pushing</span>
    <span class="token comment">//If the communication is to be encrypted, you must first configure the RSA key in both OpenD and the client. If it is not configured, it will not be encrypted.</span>
     <span class="token comment">//It will be encrypted if the RSA key is configured and the specified encryption algorithm is not PacketEncAlgo_None. (Even if it is not set here and the RSA key is configured, the default encryption method will be used), and the FTAES_ECB algorithm is used by default</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> packetEncAlgo <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Specify the packet encryption algorithm, see the enumeration definition of Common.PacketEncAlgo</span>
	<span class="token keyword">optional</span> <span class="token builtin">int32</span> pushProtoFmt <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Specify the push protocol format on this connection, if not specified, use the push_proto_type configuration item</span>
	<span class="token keyword">optional</span> <span class="token builtin">string</span> programmingLanguage <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//Interface programming language, used for statistical language preference</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
	<span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> serverVer <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//OpenD version number</span>
    <span class="token keyword">required</span> <span class="token builtin">uint64</span> loginUserID <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//OpenD login user ID</span>
    <span class="token keyword">required</span> <span class="token builtin">uint64</span> connID <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//The connection ID of this connection, the unique identifier of the connection</span>
    <span class="token keyword">required</span> <span class="token builtin">string</span> connAESKey <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//The key for subsequent AES encrypted communication of this connection is fixed as a 16-byte long string</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> keepAliveInterval <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Heartbeat keepalive interval</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> aesCBCiv <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//The iv of AES encrypted communication CBC encryption mode is fixed as a 16-byte long string</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//Returned result, see the enumeration definition of Common.RetType</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Description of returned result </span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//Error code. The client usually uses retType and retMsg to judge the results and details. ErrCode only logs and accounts only when individual protocols fail.</span>
	
	<span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><p><strong>Protocol ID</strong></p> <p>1001</p></li></ul></div><div class="tab-content" style="display:none;"><h2 id="1433"><a href="#1433" class="header-anchor">#</a> Create and initialize the connection</h2> <p><code>bool InitConnect(String ip, short port, bool isEnableEncrypt)</code></p> <ul><li><p><strong>Description</strong></p> <p>Create transaction object and initialize transaction connection</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">ip</td> <td style="text-align:left;">str</td> <td style="text-align:left;">OpenD listening address.</td></tr> <tr><td style="text-align:left;">port</td> <td style="text-align:left;">int</td> <td style="text-align:left;">OpenD listening port.</td></tr> <tr><td style="text-align:left;">bEnableEncrypt</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to enable encryption.</td></tr></tbody></table></li> <li><p><strong>Return</strong></p> <ul><li>ret: Whether the execution is started, it does not represent the connection result, and the result is called back through OnInitConnect</li></ul></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">FTSPI_Trd</span><span class="token punctuation">,</span> <span class="token class-name">FTSPI_Conn</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">FTAPI_Trd</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FTAPI_Trd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        trd<span class="token punctuation">.</span><span class="token function">SetClientInfo</span><span class="token punctuation">(</span><span class="token string">&quot;csharp&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//Set client information</span>
        trd<span class="token punctuation">.</span><span class="token function">SetConnCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//Set connection callback</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        trd<span class="token punctuation">.</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInitConnect</span><span class="token punctuation">(</span><span class="token class-name">FTAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> errCode<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Trd onInitConnect: ret={0} desc={1} connID={2}\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> client<span class="token punctuation">.</span><span class="token function">GetConnectID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDisconnect</span><span class="token punctuation">(</span><span class="token class-name">FTAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> errCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Trd onDisConnect: {0}\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name">String<span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        FTAPI<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Program</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        trd<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">Trd</span> onInitConnect<span class="token punctuation">:</span> ret<span class="token operator">=</span><span class="token number">0</span> desc<span class="token operator">=</span> connID<span class="token operator">=</span><span class="token number">6826804060126078029</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="5637"><a href="#5637" class="header-anchor">#</a> Destroy the connection</h2> <p><code>void Close()</code></p> <ul><li><p><strong>Description</strong></p> <p>Destroy connection</p></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">FTAPI_Trd</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FTAPI_Trd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trd<span class="token punctuation">.</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trd<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="1433-2"><a href="#1433-2" class="header-anchor">#</a> Create and initialize the connection</h2> <p><code>boolean initConnect(String ip, short port, boolean isEnableEncrypt)</code></p> <ul><li><p><strong>Description</strong></p> <p>Create transaction object and initialize transaction connection</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">ip</td> <td style="text-align:left;">str</td> <td style="text-align:left;">OpenD listening address.</td></tr> <tr><td style="text-align:left;">port</td> <td style="text-align:left;">int</td> <td style="text-align:left;">OpenD listening port.</td></tr> <tr><td style="text-align:left;">bEnableEncrypt</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to enable encryption.</td></tr></tbody></table></li> <li><p><strong>Return</strong></p> <ul><li>ret: Whether to start execution. Does not represent the connection result, the result is called back through onInitConnect</li></ul></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrdDemo</span> <span class="token keyword">implements</span> <span class="token class-name">FTSPI_Trd</span><span class="token punctuation">,</span> <span class="token class-name">FTSPI_Conn</span> <span class="token punctuation">{</span>
    <span class="token class-name">FTAPI_Conn_Trd</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FTAPI_Conn_Trd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TrdDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        trd<span class="token punctuation">.</span><span class="token function">setClientInfo</span><span class="token punctuation">(</span><span class="token string">&quot;javaclient&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set client information</span>
        trd<span class="token punctuation">.</span><span class="token function">setConnSpi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set connection callback</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        trd<span class="token punctuation">.</span><span class="token function">initConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onInitConnect</span><span class="token punctuation">(</span><span class="token class-name">FTAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token keyword">long</span> errCode<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Trd onInitConnect: ret=%b desc=%s connID=%d\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> client<span class="token punctuation">.</span><span class="token function">getConnectID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDisconnect</span><span class="token punctuation">(</span><span class="token class-name">FTAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token keyword">long</span> errCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Trd onDisConnect: %d\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token constant">FTAPI</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TrdDemo</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrdDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        trd<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> exc<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="5637-2"><a href="#5637-2" class="header-anchor">#</a> Destroy the connection</h2> <p><code>void close()</code></p> <ul><li><p><strong>Description</strong></p> <p>Destroy connection</p></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">FTAPI_Conn_Trd</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FTAPI_Conn_Trd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trd<span class="token punctuation">.</span><span class="token function">initConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trd<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="1433-3"><a href="#1433-3" class="header-anchor">#</a> Create and initialize the connection</h2> <p><code>FTAPI_Trd* CreateTrdApi();</code> <code>bool InitConnect(const char* szIPAddr, Futu::u16_t nPort, bool bEnableEncrypt);</code></p> <ul><li><p><strong>Description</strong></p> <p>Create transaction object and initialize transaction connection</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">szIPAddr</td> <td style="text-align:left;">str</td> <td style="text-align:left;">OpenD listening address.</td></tr> <tr><td style="text-align:left;">nPort</td> <td style="text-align:left;">int</td> <td style="text-align:left;">OpenD listening port.</td></tr> <tr><td style="text-align:left;">bEnableEncrypt</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to enable encryption.</td></tr></tbody></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>FTAPI_Trd <span class="token operator">*</span>m_pTrdApi <span class="token operator">=</span> <span class="token class-name">FTAPI</span><span class="token double-colon punctuation">::</span><span class="token function">CreateTrdApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m_pTrdApi<span class="token operator">-&gt;</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">FTAPI</span><span class="token double-colon punctuation">::</span><span class="token function">ReleaseTrdApi</span><span class="token punctuation">(</span>m_pTrdApi<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="5637-3"><a href="#5637-3" class="header-anchor">#</a> Destroy the connection</h2> <p><code>void ReleaseTrdApi(FTAPI_Trd* pTrd);</code></p> <ul><li><p><strong>Description</strong></p> <p>Destroy connection</p></li> <li><p><strong>Return</strong></p> <ul><li>pTrd: Connection example</li></ul></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>FTAPI_Trd <span class="token operator">*</span>m_pTrdApi <span class="token operator">=</span> <span class="token class-name">FTAPI</span><span class="token double-colon punctuation">::</span><span class="token function">CreateTrdApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m_pTrdApi<span class="token operator">-&gt;</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">FTAPI</span><span class="token double-colon punctuation">::</span><span class="token function">ReleaseTrdApi</span><span class="token punctuation">(</span>m_pTrdApi<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="1433-4"><a href="#1433-4" class="header-anchor">#</a> Create and initialize the connection</h2> <p><code>start(ip, port, ssl, key)</code></p> <ul><li><p><strong>Description</strong></p> <p>Create transaction object and initialize transaction connection</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">ip</td> <td style="text-align:left;">str</td> <td style="text-align:left;">OpenD listening WebSocket address.</td></tr> <tr><td style="text-align:left;">port</td> <td style="text-align:left;">int</td> <td style="text-align:left;">OpenD listening WebSocket port.</td></tr> <tr><td style="text-align:left;">ssl</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to enable SSL encryption, refer to <a href="/moomoo-api-doc/en/qa/other.html#5728">WebSocket related</a>.</td></tr> <tr><td style="text-align:left;">key</td> <td style="text-align:left;">str</td> <td style="text-align:left;">The connection private key, otherwise the connection will time out. The key is configurable in OpenD, and the visualization version will randomly specify one if the key is not specified.</td></tr></tbody></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> ftWebSocket <span class="token keyword">from</span> <span class="token string">&quot;@/components/ft-websocket/main.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>
    <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>websocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ftWebSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>websocket<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">33333</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="1321-2"><a href="#1321-2" class="header-anchor">#</a> Close the connection</h2> <p><code>close()</code></p> <ul><li><p><strong>Description</strong></p> <p>Close the connection</p></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> ftWebSocket <span class="token keyword">from</span> <span class="token string">&quot;@/components/ft-websocket/main.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>
    <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>websocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ftWebSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>websocket<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">33333</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>websocket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div></div></div><div class="tab-content" style="display:;"><div class="ft-switcher"><div class="tab-header" style="display:none;"><ul><li class="active"> Python
            </li><li> Proto
            </li><li> C#
            </li><li> Java
            </li><li> C++
            </li><li> JavaScript
            </li></ul></div> <div class="tab-content" style="display:;"><h2 id="3490-2"><a href="#3490-2" class="header-anchor">#</a> Create the connection</h2> <p><code>OpenSecTradeContext(filter_trdmarket=TrdMarket.HK, host='127.0.0.1', port=11111, is_encrypt=None, security_firm=SecurityFirm.FUTUINC)</code></p> <p><code>OpenFutureTradeContext(host='127.0.0.1', port=11111, is_encrypt=None, security_firm=SecurityFirm.FUTUINC)</code></p> <ul><li><p><strong>Description</strong></p> <p>According to the transaction variaties, select a correct account, and create its transaction object.</p> <table><thead><tr><th style="text-align:left;">Transaction Objects</th> <th style="text-align:left;">Accounts</th></tr></thead> <tbody><tr><td style="text-align:left;">OpenSecTradeContext</td> <td style="text-align:left;">Securities account <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Trading stocks, ETFs, warrants, stock options or index options uses this account. </div></div></div></div></td></tr> <tr><td style="text-align:left;">OpenFutureTradeContext</td> <td style="text-align:left;">Futures account <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Trading futures or future options uses this account.</div></div></div></div></td></tr></tbody></table></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">filter_trdmarket</td> <td style="text-align:left;"><a href="/moomoo-api-doc/en/trade/trade.html#6257">TrdMarket</a></td> <td style="text-align:left;">Filter accounts according to the transaction market authority. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content"><ul><li>This parameter is only available for OpenSecTradeContext.</li><li>This parameter is only used to filter accounts and will not affect transaction connections.</li></ul></div></div></div></div></td></tr> <tr><td style="text-align:left;">host</td> <td style="text-align:left;">str</td> <td style="text-align:left;">The IP listened by OpenD.</td></tr> <tr><td style="text-align:left;">port</td> <td style="text-align:left;">int</td> <td style="text-align:left;">The port listened by OpenD.</td></tr> <tr><td style="text-align:left;">is_encrypt</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to enable encryption. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Default None means: use the setting of <a href="/moomoo-api-doc/en/ftapi/init.html#7910">enable_proto_encrypt</a>.</div></div></div></div></td></tr> <tr><td style="text-align:left;">security_firm</td> <td style="text-align:left;"><a href="/moomoo-api-doc/en/trade/trade.html#9434">SecurityFirm</a></td> <td style="text-align:left;">Specified security firm</td></tr></tbody></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> moomoo <span class="token keyword">import</span> <span class="token operator">*</span>
trd_ctx <span class="token operator">=</span> OpenSecTradeContext<span class="token punctuation">(</span>filter_trdmarket<span class="token operator">=</span>TrdMarket<span class="token punctuation">.</span>US<span class="token punctuation">,</span> host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">11111</span><span class="token punctuation">,</span> is_encrypt<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> security_firm<span class="token operator">=</span>SecurityFirm<span class="token punctuation">.</span>FUTUINC<span class="token punctuation">)</span>
trd_ctx<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># After using the connection, remember to close it to prevent the number of connections from running out</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="1321-3"><a href="#1321-3" class="header-anchor">#</a> Close the connection</h2> <p><code>close()</code></p> <ul><li><p><strong>Description</strong></p> <p>Close the trading object. By default, the threads created inside the moomoo API will prevent the process from exiting, and the process can exit normally only after all Contexts are closed. But through <a href="/moomoo-api-doc/en/ftapi/init.html#5242">set_all_thread_daemon</a>, all internal threads can be set as daemon threads. At this time, even if close of Context is not called, the process can exit normally.</p></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> moomoo <span class="token keyword">import</span> <span class="token operator">*</span>
trd_ctx <span class="token operator">=</span> OpenSecTradeContext<span class="token punctuation">(</span>filter_trdmarket<span class="token operator">=</span>TrdMarket<span class="token punctuation">.</span>US<span class="token punctuation">,</span> host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">11111</span><span class="token punctuation">,</span> is_encrypt<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> security_firm<span class="token operator">=</span>SecurityFirm<span class="token punctuation">.</span>FUTUINC<span class="token punctuation">)</span>
trd_ctx<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># After using the connection, remember to close it to prevent the number of connections from running out</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="7613-2"><a href="#7613-2" class="header-anchor">#</a> InitConnect.proto</h2> <ul><li><p><strong>Description</strong></p> <p>Create transaction object and initialize transaction connection</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code><span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> clientVer <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//Client version number. clientVer = number before &quot;.&quot; * 100 + number after &quot;.&quot;. For example: clientVer = 1 * 100 + 1 = 101 for version 1.1 , and clientVer = 2 * 100 + 21 = 221 for version 2.21.</span>
    <span class="token keyword">required</span> <span class="token builtin">string</span> clientID <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//The unique identifier for client, no specific generation rules, the client can guarantee the uniqueness</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> recvNotify <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//Whether this connection receives notifications of market status or events that transaction needs to be re-unlocked. If True, OpenD will push these notifications to this connection, otherwise false means not receiving or pushing</span>
    <span class="token comment">//If the communication is to be encrypted, you must first configure the RSA key in both OpenD and the client. If it is not configured, it will not be encrypted.</span>
     <span class="token comment">//It will be encrypted if the RSA key is configured and the specified encryption algorithm is not PacketEncAlgo_None. (Even if it is not set here and the RSA key is configured, the default encryption method will be used), and the FTAES_ECB algorithm is used by default</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> packetEncAlgo <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Specify the packet encryption algorithm, see the enumeration definition of Common.PacketEncAlgo</span>
	<span class="token keyword">optional</span> <span class="token builtin">int32</span> pushProtoFmt <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Specify the push protocol format on this connection, if not specified, use the push_proto_type configuration item</span>
	<span class="token keyword">optional</span> <span class="token builtin">string</span> programmingLanguage <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//Interface programming language, used for statistical language preference</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
	<span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> serverVer <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//OpenD version number</span>
    <span class="token keyword">required</span> <span class="token builtin">uint64</span> loginUserID <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//OpenD login user ID</span>
    <span class="token keyword">required</span> <span class="token builtin">uint64</span> connID <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//The connection ID of this connection, the unique identifier of the connection</span>
    <span class="token keyword">required</span> <span class="token builtin">string</span> connAESKey <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//The key for subsequent AES encrypted communication of this connection is fixed as a 16-byte long string</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> keepAliveInterval <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Heartbeat keepalive interval</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> aesCBCiv <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//The iv of AES encrypted communication CBC encryption mode is fixed as a 16-byte long string</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//Returned result, see the enumeration definition of Common.RetType</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Description of returned result </span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//Error code. The client usually uses retType and retMsg to judge the results and details. ErrCode only logs and accounts only when individual protocols fail.</span>
	
	<span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><p><strong>Protocol ID</strong></p> <p>1001</p></li></ul></div><div class="tab-content" style="display:none;"><h2 id="1433-5"><a href="#1433-5" class="header-anchor">#</a> Create and initialize the connection</h2> <p><code>bool InitConnect(String ip, short port, bool isEnableEncrypt)</code></p> <ul><li><p><strong>Description</strong></p> <p>Create transaction object and initialize transaction connection</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">ip</td> <td style="text-align:left;">str</td> <td style="text-align:left;">OpenD listening address.</td></tr> <tr><td style="text-align:left;">port</td> <td style="text-align:left;">int</td> <td style="text-align:left;">OpenD listening port.</td></tr> <tr><td style="text-align:left;">bEnableEncrypt</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to enable encryption.</td></tr></tbody></table></li> <li><p><strong>Return</strong></p> <ul><li>ret: Whether the execution is started, it does not represent the connection result, and the result is called back through OnInitConnect</li></ul></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MMSPI_Trd</span><span class="token punctuation">,</span> <span class="token class-name">MMSPI_Conn</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">MMAPI_Trd</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MMAPI_Trd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        trd<span class="token punctuation">.</span><span class="token function">SetClientInfo</span><span class="token punctuation">(</span><span class="token string">&quot;csharp&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//Set client information</span>
        trd<span class="token punctuation">.</span><span class="token function">SetConnCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//Set connection callback</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        trd<span class="token punctuation">.</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInitConnect</span><span class="token punctuation">(</span><span class="token class-name">MMAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> errCode<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Trd onInitConnect: ret={0} desc={1} connID={2}\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> client<span class="token punctuation">.</span><span class="token function">GetConnectID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDisconnect</span><span class="token punctuation">(</span><span class="token class-name">MMAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> errCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Trd onDisConnect: {0}\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name">String<span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        MMAPI<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Program</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        trd<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">Trd</span> onInitConnect<span class="token punctuation">:</span> ret<span class="token operator">=</span><span class="token number">0</span> desc<span class="token operator">=</span> connID<span class="token operator">=</span><span class="token number">6826804060126078029</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="5637-4"><a href="#5637-4" class="header-anchor">#</a> Destroy the connection</h2> <p><code>void Close()</code></p> <ul><li><p><strong>Description</strong></p> <p>Destroy connection</p></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">MMAPI_Trd</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MMAPI_Trd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trd<span class="token punctuation">.</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trd<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="1433-6"><a href="#1433-6" class="header-anchor">#</a> Create and initialize the connection</h2> <p><code>boolean initConnect(String ip, short port, boolean isEnableEncrypt)</code></p> <ul><li><p><strong>Description</strong></p> <p>Create transaction object and initialize transaction connection</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">ip</td> <td style="text-align:left;">str</td> <td style="text-align:left;">OpenD listening address.</td></tr> <tr><td style="text-align:left;">port</td> <td style="text-align:left;">int</td> <td style="text-align:left;">OpenD listening port.</td></tr> <tr><td style="text-align:left;">bEnableEncrypt</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to enable encryption.</td></tr></tbody></table></li> <li><p><strong>Return</strong></p> <ul><li>ret: Whether to start execution. Does not represent the connection result, the result is called back through onInitConnect</li></ul></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrdDemo</span> <span class="token keyword">implements</span> <span class="token class-name">MMSPI_Trd</span><span class="token punctuation">,</span> <span class="token class-name">MMSPI_Conn</span> <span class="token punctuation">{</span>
    <span class="token class-name">MMAPI_Conn_Trd</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MMAPI_Conn_Trd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TrdDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        trd<span class="token punctuation">.</span><span class="token function">setClientInfo</span><span class="token punctuation">(</span><span class="token string">&quot;javaclient&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set client information</span>
        trd<span class="token punctuation">.</span><span class="token function">setConnSpi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set connection callback</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        trd<span class="token punctuation">.</span><span class="token function">initConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onInitConnect</span><span class="token punctuation">(</span><span class="token class-name">MMAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token keyword">long</span> errCode<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Trd onInitConnect: ret=%b desc=%s connID=%d\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> client<span class="token punctuation">.</span><span class="token function">getConnectID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDisconnect</span><span class="token punctuation">(</span><span class="token class-name">MMAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token keyword">long</span> errCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Trd onDisConnect: %d\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token constant">MMAPI</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TrdDemo</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrdDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        trd<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> exc<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="5637-5"><a href="#5637-5" class="header-anchor">#</a> Destroy the connection</h2> <p><code>void close()</code></p> <ul><li><p><strong>Description</strong></p> <p>Destroy connection</p></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">MMAPI_Conn_Trd</span> trd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MMAPI_Conn_Trd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trd<span class="token punctuation">.</span><span class="token function">initConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trd<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="1433-7"><a href="#1433-7" class="header-anchor">#</a> Create and initialize the connection</h2> <p><code>MMAPI_Trd* CreateTrdApi();</code> <code>bool InitConnect(const char* szIPAddr, moomoo::u16_t nPort, bool bEnableEncrypt);</code></p> <ul><li><p><strong>Description</strong></p> <p>Create transaction object and initialize transaction connection</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">szIPAddr</td> <td style="text-align:left;">str</td> <td style="text-align:left;">OpenD listening address.</td></tr> <tr><td style="text-align:left;">nPort</td> <td style="text-align:left;">int</td> <td style="text-align:left;">OpenD listening port.</td></tr> <tr><td style="text-align:left;">bEnableEncrypt</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to enable encryption.</td></tr></tbody></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>MMAPI_Trd <span class="token operator">*</span>m_pTrdApi <span class="token operator">=</span> <span class="token class-name">MMAPI</span><span class="token double-colon punctuation">::</span><span class="token function">CreateTrdApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m_pTrdApi<span class="token operator">-&gt;</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MMAPI</span><span class="token double-colon punctuation">::</span><span class="token function">ReleaseTrdApi</span><span class="token punctuation">(</span>m_pTrdApi<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="5637-6"><a href="#5637-6" class="header-anchor">#</a> Destroy the connection</h2> <p><code>void ReleaseTrdApi(MMAPI_Trd* pTrd);</code></p> <ul><li><p><strong>Description</strong></p> <p>Destroy connection</p></li> <li><p><strong>Return</strong></p> <ul><li>pTrd: Connection example</li></ul></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>MMAPI_Trd <span class="token operator">*</span>m_pTrdApi <span class="token operator">=</span> <span class="token class-name">MMAPI</span><span class="token double-colon punctuation">::</span><span class="token function">CreateTrdApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m_pTrdApi<span class="token operator">-&gt;</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">MMAPI</span><span class="token double-colon punctuation">::</span><span class="token function">ReleaseTrdApi</span><span class="token punctuation">(</span>m_pTrdApi<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="1433-8"><a href="#1433-8" class="header-anchor">#</a> Create and initialize the connection</h2> <p><code>start(ip, port, ssl, key)</code></p> <ul><li><p><strong>Description</strong></p> <p>Create transaction object and initialize transaction connection</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">ip</td> <td style="text-align:left;">str</td> <td style="text-align:left;">OpenD listening WebSocket address.</td></tr> <tr><td style="text-align:left;">port</td> <td style="text-align:left;">int</td> <td style="text-align:left;">OpenD listening WebSocket port.</td></tr> <tr><td style="text-align:left;">ssl</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to enable SSL encryption, refer to <a href="/moomoo-api-doc/en/qa/other.html#5728">WebSocket related</a>.</td></tr> <tr><td style="text-align:left;">key</td> <td style="text-align:left;">str</td> <td style="text-align:left;">The connection private key, otherwise the connection will time out. The key is configurable in OpenD, and the visualization version will randomly specify one if the key is not specified.</td></tr></tbody></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> mmWebSocket <span class="token keyword">from</span> <span class="token string">&quot;@/components/mm-websocket/main.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>
    <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>websocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mmWebSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>websocket<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">33333</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="1321-4"><a href="#1321-4" class="header-anchor">#</a> Close the connection</h2> <p><code>close()</code></p> <ul><li><p><strong>Description</strong></p> <p>Close the connection</p></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> mmWebSocket <span class="token keyword">from</span> <span class="token string">&quot;@/components/mm-websocket/main.js&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>
    <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>websocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mmWebSocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>websocket<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">33333</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>websocket<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div></div></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/moomoo-api-doc/en/trade/overview.html" class="prev">
        Overview
      </a></span> <span class="next"><a href="/moomoo-api-doc/en/trade/get-acc-list.html">
        Get the List of Trading Accounts
      </a>
      →
    </span></p></div> </main> <aside class="rightbar"><ul class="rightbar-links"><a href="/moomoo-api-doc/en/trade/base.html" aria-current="page" class="active rightbar-link">Transaction Objects</a></ul></aside></div><div class="global-ui"></div></div>
    <script src="/moomoo-api-doc/assets/js/app.76d125c0.js" defer></script><script src="/moomoo-api-doc/assets/js/2.e1858e4a.js" defer></script><script src="/moomoo-api-doc/assets/js/86.f2975c25.js" defer></script><script src="/moomoo-api-doc/assets/js/28.3fe3716c.js" defer></script><script src="/moomoo-api-doc/assets/js/35.424be492.js" defer></script><script src="/moomoo-api-doc/assets/js/24.9af08641.js" defer></script>
  </body>
</html>
