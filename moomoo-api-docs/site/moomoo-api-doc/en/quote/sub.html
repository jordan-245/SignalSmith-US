<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Subscribe and Unsubscribe | moomoo API Doc v9.6</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="moomoo API Doc">
    <link rel="preload" href="/moomoo-api-doc/assets/css/0.styles.ea0b1d81.css" as="style"><link rel="preload" href="/moomoo-api-doc/assets/js/app.76d125c0.js" as="script"><link rel="preload" href="/moomoo-api-doc/assets/js/2.e1858e4a.js" as="script"><link rel="preload" href="/moomoo-api-doc/assets/js/78.3eaa2d23.js" as="script"><link rel="preload" href="/moomoo-api-doc/assets/js/28.3fe3716c.js" as="script"><link rel="preload" href="/moomoo-api-doc/assets/js/35.424be492.js" as="script"><link rel="preload" href="/moomoo-api-doc/assets/js/24.9af08641.js" as="script"><link rel="prefetch" href="/moomoo-api-doc/assets/js/10.94bcbf16.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/100.5aad709f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/101.6315f7fb.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/102.6cece76d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/103.40195fc5.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/104.e0830381.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/105.936eb4d9.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/106.ed3aee2b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/107.7748df13.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/108.39b67a60.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/109.4b1236e2.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/11.2fbf442f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/110.bc264581.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/111.a9652fa1.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/112.038c2fcd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/113.587f4a42.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/114.9203188f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/115.0d36e730.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/116.0f4b866f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/117.76221359.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/118.caa7bc9a.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/119.ba336510.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/12.c4851259.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/120.3683de14.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/121.ea95d7cb.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/122.618c3ed6.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/123.055b7010.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/124.c045cd63.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/125.d42b0714.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/126.b2f6e933.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/127.e9d110f8.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/128.a11f8202.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/129.6626eb94.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/13.4f3b3d7e.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/130.6539fcba.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/131.75bdf579.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/132.9d24d7e7.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/133.d9e1803b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/134.a475efd5.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/135.cc33709b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/136.21873923.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/137.69826660.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/138.31047450.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/139.ce995941.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/14.13b59c71.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/140.e70bdec0.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/141.d9d53a87.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/142.a04d0bea.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/143.a672978f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/144.818a84ae.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/145.e46cc3df.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/146.a29ec4b9.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/147.5cfe641e.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/148.358ecaa0.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/149.3935be2f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/15.3d02da17.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/150.40c46b61.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/151.3456807d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/152.308a6ffd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/153.d95721a5.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/154.c6b90cda.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/155.68c534de.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/156.fa6d7af3.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/157.a33831dd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/158.56280019.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/159.9b880f55.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/16.33d80555.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/160.f4aa9622.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/161.727a3a78.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/162.941951ea.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/163.8b7da111.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/164.dfd53e0d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/165.0c0855cd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/166.21bd9238.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/167.e4ae9cf3.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/168.3f4281c0.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/169.f37d7335.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/17.6ac2d3ef.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/170.4376c120.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/171.948e10e3.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/18.7deab3c8.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/19.6e70cac3.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/20.c1df6286.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/21.5647999f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/22.a50b564c.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/23.7870807e.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/25.f509878d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/26.b1244706.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/27.082f3f2b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/29.f69366ed.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/3.f9c39755.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/30.aee38619.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/31.7ab0c7db.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/32.d4a3260b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/33.74565b1d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/34.29135595.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/36.3857d105.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/37.7d889315.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/38.637a73c2.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/39.aa973d8f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/4.04d2c45d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/40.480f6bad.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/41.62d11f5f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/42.6861ed24.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/43.b8eb0308.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/44.e0fc8394.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/45.12015c46.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/46.acc698c7.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/47.997f18b2.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/48.c0a3ed4b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/49.605a98fa.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/5.8c452a45.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/50.ab8e902f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/51.93a43c80.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/52.d7c28131.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/53.bc4fcbfa.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/54.f2134ef8.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/55.0fb8c79f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/56.d6f1d66e.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/57.e3b3ea62.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/58.a3b791f0.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/59.15613da4.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/6.9a2ded1c.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/60.60f97ce5.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/61.adf5183d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/62.10e9e40e.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/63.f3768483.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/64.5e7093fb.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/65.437af457.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/66.fc1b6993.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/67.14953f01.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/68.5b8d5ad6.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/69.7f2d1c8b.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/7.f1cb5afb.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/70.2cfa12e6.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/71.0acce1e8.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/72.74bec554.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/73.00d57d06.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/74.bbe2f552.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/75.654e7361.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/76.e7abbb6c.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/77.9c2ecdf1.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/79.cc7f1ac2.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/8.e457aac2.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/80.148805ce.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/81.40dc2530.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/82.bbe1f83f.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/83.d1ecfd2c.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/84.5013f0ea.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/85.ed102602.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/86.f2975c25.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/87.7d6540bd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/88.6f722f70.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/89.8fed8c82.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/9.c9d4402a.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/90.a15edebc.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/91.1f997c5d.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/92.dd51fa69.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/93.042545f6.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/94.71d9cc14.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/95.fb45f9d3.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/96.0f81a014.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/97.09768abd.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/98.cc14b450.js"><link rel="prefetch" href="/moomoo-api-doc/assets/js/99.6d2cbe79.js">
    <link rel="stylesheet" href="/moomoo-api-doc/assets/css/0.styles.ea0b1d81.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/moomoo-api-doc/en/" class="home-link router-link-active"><img src="/moomoo-api-doc/img/logo.png" alt="moomoo API Doc v9.6" class="logo"> <span class="site-name can-hide">moomoo API Doc v9.6</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="ftcode-links can-hide"><div class="ftcode-item"><div class="ftcode-dropdown-wrapper"><button type="button" aria-label="Programming Language" class="ftcode-dropdown-title"><span class="title">Programming Language</span> <span class="arrow right"></span></button> <ul class="ftcode-dropdown" style="display:none;"><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link active"><span class="arrow active"></span> <span class="title active">Python</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">C#</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">Java</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">C++</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">JavaScript</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">proto</span></span></li></ul></div></div></nav> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="简体中文" class="dropdown-title"><span class="title">简体中文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/moomoo-api-doc/quote/sub.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/moomoo-api-doc/en/quote/sub.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="ftcode-links"><div class="ftcode-item"><div class="ftcode-dropdown-wrapper"><button type="button" aria-label="Programming Language" class="ftcode-dropdown-title"><span class="title">Programming Language</span> <span class="arrow right"></span></button> <ul class="ftcode-dropdown" style="display:none;"><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link active"><span class="arrow active"></span> <span class="title active">Python</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">C#</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">Java</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">C++</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">JavaScript</span></span></li><li class="ftcode-dropdown-item"><!----> <span class="ftcode-link"><span class="arrow"></span> <span class="title">proto</span></span></li></ul></div></div></nav> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="简体中文" class="dropdown-title"><span class="title">简体中文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/moomoo-api-doc/quote/sub.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/moomoo-api-doc/en/quote/sub.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Introduction</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Quick Start</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>OpenD</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading openData"><span>Quote API</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/moomoo-api-doc/en/quote/overview.html" class="sidebar-link">Overview</a></li><li><a href="/moomoo-api-doc/en/quote/base.html" class="sidebar-link">Quote Object</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading openData"><span>Real-Time Data</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading openData"><span>Subscription</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/moomoo-api-doc/en/quote/sub.html" aria-current="page" class="active sidebar-link">Subscribe and Unsubscribe</a></li><li><a href="/moomoo-api-doc/en/quote/query-subscription.html" class="sidebar-link">Get Subscription Status</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Push and Callback</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Get</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Basic Data</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Related Derivatives</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Market Filter</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Customization</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/moomoo-api-doc/en/quote/quote.html" class="sidebar-link">Quotation Definitions</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Trade API</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Basic API</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Q&amp;A</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="2733"><a href="#2733" class="header-anchor">#</a> Subscribe and Unsubscribe</h1> <div class="ft-doc-switcher"><div class="tab-content" style="display:none;"><div class="ft-switcher"><div class="tab-header" style="display:none;"><ul><li class="active"> Python
            </li><li> Proto
            </li><li> C#
            </li><li> Java
            </li><li> C++
            </li><li> JavaScript
            </li></ul></div> <div class="tab-content" style="display:;"><h2 id="4206"><a href="#4206" class="header-anchor">#</a> Subscribe to Real-Time Market Data</h2> <p><code>subscribe(code_list, subtype_list, is_first_push=True, subscribe_push=True, is_detailed_orderbook=False, extended_time=False, session=Session.NONE)</code></p> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.<br>
HK market (including underlying stocks, warrants, CBBCs, options, futures) subscriptions require LV1 and above permissions. Subscriptions are not supported under BMP permissions.<br>
US market (including underlying stocks, ETFs) subscriptions for overnight quotes require LV1 and above permissions. Subscriptions are not supported under BMP permissions.</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">code_list</td> <td style="text-align:left;">list</td> <td style="text-align:left;">A list of stock codes that need to be subscribed. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Data type of elements in the list is str.</div></div></div></div></td></tr> <tr><td style="text-align:left;">subtype_list</td> <td style="text-align:left;">list</td> <td style="text-align:left;">List of data types that need to be subscribed. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Data type of elements in the list is <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a>.</div></div></div></div></td></tr> <tr><td style="text-align:left;">is_first_push</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to push the cached data immediately after a successful subscription. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content"><ul><li>True: Push the cached data. When there is a disconnection and reconnection between scripts and OpenD, the last data before the disconnection will be pushed again if it is set to True when resubscribing.</li><li>False: Do not push the cached data. Wait for the latest data to be pushed from Futu server.</li></ul></div></div></div></div></td></tr> <tr><td style="text-align:left;">subscribe_push</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to push data after subscription.<div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">After subscription, OpenD provides <a href="/moomoo-api-doc/en/qa/quote.html#5505">two methods to obtain data</a>. If you only use the method of <strong>Get Real-time Data</strong> , setting to False can save part of the performance cost.<ul><li>True: Push data. It must be set to True if the <strong>Real-time data Callback</strong> method is used.</li><li>False: Do not push data. It is recommended to set to False if <strong>only</strong> using the <strong>Get Real-time Data</strong>.</li></ul></div></div></div></div></td></tr> <tr><td style="text-align:left;">is_detailed_orderbook</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to subscribe to the detailed order book. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content"><ul><li>Only for Hong Kong stocks ORDER_BOOK type under the authority of Hong Kong stocks SF market. </li><li>Under the authority of US stocks &amp; futures LV2, the detailed order book is not provided.</li></ul></div></div></div></div></td></tr> <tr><td style="text-align:left;">extended_time</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to allow pre-market and after-hours data of US stocks. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Only used for subscribing to real-time candlestick and real-time Time Frame and real-time tick-by-tick of US stocks.</div></div></div></div></td></tr> <tr><td style="text-align:left;">session</td> <td style="text-align:left;"><a href="/moomoo-api-doc/en/quote/quote.html#8688">Session</a></td> <td style="text-align:left;">US stocks quotes session <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content"><ul><li>Only used for subscribing to real-time candlestick and real-time Time Frame and real-time tick-by-tick of US stocks.</li><li>Please choose 'ALL' to subscribe 24H quotes for US stocks. The 'OVERNIGHT' is not allowed.</li><li>Minimum version requirements: 9.2.4207</li></ul></div></div></div></div></td></tr></tbody></table></li></ul> <ul><li><p><strong>Return</strong></p> <table><tr><th>Field</th> <th>Type</th> <th>Description</th></tr> <tr><td>ret</td> <td><a href="../ftapi/common.html#8800"> RET_CODE</a></td> <td>Interface result.</td></tr> <tr><td rowspan="2">err_message</td> <td>NoneType</td> <td>If ret == RET_OK, None is returned.</td></tr> <tr><td>str</td> <td>If ret != RET_OK, error description is returned.</td></tr></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> time
<span class="token keyword">from</span> futu <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">class</span> <span class="token class-name">OrderBookTest</span><span class="token punctuation">(</span>OrderBookHandlerBase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">on_recv_rsp</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> rsp_pb<span class="token punctuation">)</span><span class="token punctuation">:</span>
        ret_code<span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>OrderBookTest<span class="token punctuation">,</span>self<span class="token punctuation">)</span><span class="token punctuation">.</span>on_recv_rsp<span class="token punctuation">(</span>rsp_pb<span class="token punctuation">)</span>
        <span class="token keyword">if</span> ret_code <span class="token operator">!=</span> RET_OK<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;OrderBookTest: error, msg: %s&quot;</span><span class="token operator">%</span> data<span class="token punctuation">)</span>
            <span class="token keyword">return</span> RET_ERROR<span class="token punctuation">,</span> data
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;OrderBookTest &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment"># OrderBookTest's own processing logic</span>
        <span class="token keyword">return</span> RET_OK<span class="token punctuation">,</span> data
quote_ctx <span class="token operator">=</span> OpenQuoteContext<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">11111</span><span class="token punctuation">)</span>
handler <span class="token operator">=</span> OrderBookTest<span class="token punctuation">(</span><span class="token punctuation">)</span>
quote_ctx<span class="token punctuation">.</span>set_handler<span class="token punctuation">(</span>handler<span class="token punctuation">)</span> <span class="token comment"># Set real-time swing callback</span>
quote_ctx<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>SubType<span class="token punctuation">.</span>ORDER_BOOK<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># Subscribe to the order type, OpenD starts to receive continuous push from the server</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span> <span class="token comment"># Set the script to receive OpenD push duration to 15 seconds</span>
quote_ctx<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Close the current link, OpenD will automatically cancel the corresponding type of subscription for the corresponding stock after 1 minute</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>OrderBookTest  <span class="token punctuation">{</span><span class="token string">'code'</span><span class="token punctuation">:</span> <span class="token string">'US.AAPL'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Apple'</span><span class="token punctuation">,</span> <span class="token string">'svr_recv_time_bid'</span><span class="token punctuation">:</span> <span class="token string">'2025-04-07 05:00:52.266'</span><span class="token punctuation">,</span> <span class="token string">'svr_recv_time_ask'</span><span class="token punctuation">:</span> <span class="token string">'2025-04-07 05:00:53.973'</span><span class="token punctuation">,</span> <span class="token string">'Bid'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">180.2</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.19</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.18</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.14</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.13</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.1</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.05</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.03</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.02</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.01</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.0</span><span class="token punctuation">,</span> <span class="token number">441</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'Ask'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">180.3</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.38</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.4</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.42</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.46</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.5</span><span class="token punctuation">,</span> <span class="token number">1019</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.6</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.8</span><span class="token punctuation">,</span> <span class="token number">2001</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.84</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.0</span><span class="token punctuation">,</span> <span class="token number">2036</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.2</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.4</span><span class="token punctuation">,</span> <span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.5</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.79</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.8</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.9</span><span class="token punctuation">,</span> <span class="token number">94</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.98</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">182.0</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="5742"><a href="#5742" class="header-anchor">#</a> Cancel Market Data Subscription</h2> <p><code>unsubscribe(code_list, subtype_list, unsubscribe_all=False)</code></p> <ul><li><p><strong>Description</strong></p> <p>unsubscribe</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">code_list</td> <td style="text-align:left;">list</td> <td style="text-align:left;">A list of stock codes to unsubscribe. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Data type of elements in the list is str.</div></div></div></div></td></tr> <tr><td style="text-align:left;">subtype_list</td> <td style="text-align:left;">list</td> <td style="text-align:left;">List of data types that need to be subscribed. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Data type of elements in the list is <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a>.</div></div></div></div></td></tr> <tr><td style="text-align:left;">unsubscribe_all</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Cancel all subscriptions. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Ignore other parameters when it is True.</div></div></div></div></td></tr></tbody></table></li></ul> <ul><li><p><strong>Return</strong></p> <table><tr><th>Field</th> <th>Type</th> <th>Description</th></tr> <tr><td>ret</td> <td><a href="../ftapi/common.html#8800"> RET_CODE</a></td> <td>Interface result.</td></tr> <tr><td rowspan="2">err_message</td> <td>NoneType</td> <td>If ret == RET_OK, None is returned.</td></tr> <tr><td>str</td> <td>If ret != RET_OK, error description is returned.</td></tr></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> futu <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">import</span> time
quote_ctx <span class="token operator">=</span> OpenQuoteContext<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">11111</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'current subscription status :'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query the initial subscription status</span>
ret_sub<span class="token punctuation">,</span> err_message <span class="token operator">=</span> quote_ctx<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>SubType<span class="token punctuation">.</span>QUOTE<span class="token punctuation">,</span> SubType<span class="token punctuation">.</span>TICKER<span class="token punctuation">]</span><span class="token punctuation">,</span> subscribe_push<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> session<span class="token operator">=</span>Session<span class="token punctuation">.</span>ALL<span class="token punctuation">)</span>
<span class="token comment"># First subscribed to the two types of QUOTE and TICKER. After the subscription is successful, OpenD will continue to receive pushes from the server, False means that there is no need to push to the script temporarily</span>
<span class="token keyword">if</span> ret_sub <span class="token operator">==</span> RET_OK<span class="token punctuation">:</span> <span class="token comment"># Subscription successful</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'subscribe successfully! current subscription status :'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query subscription status after successful subscription</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token comment"># You can unsubscribe at least 1 minute after subscribing</span>
    ret_unsub<span class="token punctuation">,</span> err_message_unsub <span class="token operator">=</span> quote_ctx<span class="token punctuation">.</span>unsubscribe<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>SubType<span class="token punctuation">.</span>QUOTE<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> ret_unsub <span class="token operator">==</span> RET_OK<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'unsubscribe successfully! current subscription status:'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query the subscription status after canceling the subscription</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'unsubscription failed!'</span><span class="token punctuation">,</span> err_message_unsub<span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'subscription failed'</span><span class="token punctuation">,</span> err_message<span class="token punctuation">)</span>
quote_ctx<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># After using the connection, remember to close it to prevent the number of connections from running out</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>current subscription status <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
subscribe successfully！current subscription status <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">998</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'QUOTE'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'TICKER'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
unsubscribe successfully！current subscription status<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">999</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'TICKER'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="7612"><a href="#7612" class="header-anchor">#</a> Cancel All Market Data Subscriptions</h2> <p><code>unsubscribe_all()</code></p> <ul><li><p><strong>Description</strong></p> <p>Unsubscribe all subscriptions</p></li></ul> <ul><li><p><strong>Return</strong></p> <table><tr><th>Field</th> <th>Type</th> <th>Description</th></tr> <tr><td>ret</td> <td><a href="../ftapi/common.html#8800"> RET_CODE</a></td> <td>Interface result.</td></tr> <tr><td rowspan="2">err_message</td> <td>NoneType</td> <td>If ret == RET_OK, None is returned.</td></tr> <tr><td>str</td> <td>If ret != RET_OK, error description is returned.</td></tr></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> futu <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">import</span> time
quote_ctx <span class="token operator">=</span> OpenQuoteContext<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">11111</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'current subscription status :'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query the initial subscription status</span>
ret_sub<span class="token punctuation">,</span> err_message <span class="token operator">=</span> quote_ctx<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>SubType<span class="token punctuation">.</span>QUOTE<span class="token punctuation">,</span> SubType<span class="token punctuation">.</span>TICKER<span class="token punctuation">]</span><span class="token punctuation">,</span> subscribe_push<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> session<span class="token operator">=</span>Session<span class="token punctuation">.</span>ALL<span class="token punctuation">)</span>
<span class="token comment"># First subscribed to the two types of QUOTE and TICKER. After the subscription is successful, OpenD will continue to receive pushes from the server, False means that there is no need to push to the script temporarily</span>
<span class="token keyword">if</span> ret_sub <span class="token operator">==</span> RET_OK<span class="token punctuation">:</span> <span class="token comment"># Subscription successful</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'subscribe successfully! current subscription status :'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query subscription status after successful subscription</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token comment"># You can unsubscribe at least 1 minute after subscribing</span>
    ret_unsub<span class="token punctuation">,</span> err_message_unsub <span class="token operator">=</span> quote_ctx<span class="token punctuation">.</span>unsubscribe_all<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Cancel all subscriptions</span>
    <span class="token keyword">if</span> ret_unsub <span class="token operator">==</span> RET_OK<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'unsubscribe all successfully! current subscription status:'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query the subscription status after canceling the subscription</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Failed to cancel all subscriptions！'</span><span class="token punctuation">,</span> err_message_unsub<span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'subscription failed'</span><span class="token punctuation">,</span> err_message<span class="token punctuation">)</span>
quote_ctx<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># After using the connection, remember to close it to prevent the number of connections from running out</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>current subscription status <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
subscribe successfully！current subscription status <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">998</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'QUOTE'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'TICKER'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
unsubscribe <span class="token builtin">all</span> successfully！current subscription status<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="3789"><a href="#3789" class="header-anchor">#</a> Qot_Sub.proto</h2> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.<br>
HK market (including underlying stocks, warrants, CBBCs, options, futures) subscriptions require LV1 and above permissions. Subscriptions are not supported under BMP permissions.<br>
US market (including underlying stocks, ETFs) subscriptions for overnight quotes require LV1 and above permissions. Subscriptions are not supported under BMP permissions.</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Qot_Common<span class="token punctuation">.</span>Security</span> securityList <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// List of security</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> subTypeList <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.SubType, list of subscription data type</span>
    <span class="token keyword">required</span> <span class="token builtin">bool</span> isSubOrUnSub <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//true means subscribe, false means unsubscribe</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isRegOrUnRegPush <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Whether to register or unregister the push of the market quotation above the link, this parameter does not specify that no registration or unregistration operation will be performed</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> regPushRehabTypeList <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.RehabType, the type of adjustment, it takes effect when registered push and candlestick type, other subscription types ignore this parameter. This parameter does not specify the default adjust forward when registering candlestick push</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isFirstPush <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//After registration, if the local data is the first push of the existing data, the default is true if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isUnsubAll <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">//One-click cancel all subscriptions currently connected, and ignore other parameters when it is set to True.</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isSubOrderBookDetail <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//Subscription display is available, whether to subscribe to display details, only supports SF market, the default is false if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> extendedTime <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow pre-market and after-hours data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> session <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow outside regular trading data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For stock structure, refer to <a href="/moomoo-api-doc/en/quote/quote.html#5792">Security</a></li> <li>For the subscription data type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a></li> <li>For stock adjustment type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7071">RehabType</a></li></ul></blockquote> <ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//RetType, returned value</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><p><strong>Protocol ID</strong></p> <p>3001</p></li></ul></div><div class="tab-content" style="display:none;"><h2 id="4159"><a href="#4159" class="header-anchor">#</a> Sub</h2> <p><code>uint Sub(QotSub.Request req);</code><br> <code>virtual void OnReply_Sub(FTAPI_Conn client, uint nSerialNo, QotSub.Response rsp);</code></p> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.<br>
HK market (including underlying stocks, warrants, CBBCs, options, futures) subscriptions require LV1 and above permissions. Subscriptions are not supported under BMP permissions.<br>
US market (including underlying stocks, ETFs) subscriptions for overnight quotes require LV1 and above permissions. Subscriptions are not supported under BMP permissions.</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Qot_Common<span class="token punctuation">.</span>Security</span> securityList <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// List of security</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> subTypeList <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.SubType, list of subscription data type</span>
    <span class="token keyword">required</span> <span class="token builtin">bool</span> isSubOrUnSub <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//true means subscribe, false means unsubscribe</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isRegOrUnRegPush <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Whether to register or unregister the push of the market quotation above the link, this parameter does not specify that no registration or unregistration operation will be performed</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> regPushRehabTypeList <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.RehabType, the type of adjustment, it takes effect when registered push and candlestick type, other subscription types ignore this parameter. This parameter does not specify the default adjust forward when registering candlestick push</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isFirstPush <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//After registration, if the local data is the first push of the existing data, the default is true if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isUnsubAll <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">//One-click cancel all subscriptions currently connected, and ignore other parameters when it is set to True.</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isSubOrderBookDetail <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//Subscription display is available, whether to subscribe to display details, only supports SF market, the default is false if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> extendedTime <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow pre-market and after-hours data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> session <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow outside regular trading data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For stock structure, refer to <a href="/moomoo-api-doc/en/quote/quote.html#5792">Security</a></li> <li>For the subscription data type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a></li> <li>For stock adjustment type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7071">RehabType</a></li></ul></blockquote> <ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//RetType, returned value</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><strong>Example</strong></li></ul> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span><span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">FTSPI_Qot</span><span class="token punctuation">,</span> <span class="token class-name">FTSPI_Conn</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">FTAPI_Qot</span> qot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FTAPI_Qot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        qot<span class="token punctuation">.</span><span class="token function">SetClientInfo</span><span class="token punctuation">(</span><span class="token string">&quot;csharp&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set client information</span>
        qot<span class="token punctuation">.</span><span class="token function">SetConnCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set connection callback</span>
        qot<span class="token punctuation">.</span><span class="token function">SetQotCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set transaction callback</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        qot<span class="token punctuation">.</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInitConnect</span><span class="token punctuation">(</span><span class="token class-name">FTAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> errCode<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Qot onInitConnect: ret={0} desc={1} connID={2}\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> client<span class="token punctuation">.</span><span class="token function">GetConnectID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>errCode <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token class-name">QotCommon<span class="token punctuation">.</span>Security</span> sec <span class="token operator">=</span> QotCommon<span class="token punctuation">.</span>Security<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">SetMarket</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>QotCommon<span class="token punctuation">.</span>QotMarket<span class="token punctuation">.</span>QotMarket_HK_Security<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">SetCode</span><span class="token punctuation">(</span><span class="token string">&quot;00700&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">QotSub<span class="token punctuation">.</span>C2S</span> c2s <span class="token operator">=</span> QotSub<span class="token punctuation">.</span>C2S<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">AddSecurityList</span><span class="token punctuation">(</span>sec<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">AddSubTypeList</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>QotCommon<span class="token punctuation">.</span>SubType<span class="token punctuation">.</span>SubType_Basic<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">SetIsSubOrUnSub</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">QotSub<span class="token punctuation">.</span>Request</span> req <span class="token operator">=</span> QotSub<span class="token punctuation">.</span>Request<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetC2S</span><span class="token punctuation">(</span>c2s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">uint</span></span> seqNo <span class="token operator">=</span> qot<span class="token punctuation">.</span><span class="token function">Sub</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Send QotSub: {0}\n&quot;</span><span class="token punctuation">,</span> seqNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDisconnect</span><span class="token punctuation">(</span><span class="token class-name">FTAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> errCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Qot onDisConnect: {0}\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnReply_Sub</span><span class="token punctuation">(</span><span class="token class-name">FTAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">uint</span></span> nSerialNo<span class="token punctuation">,</span> <span class="token class-name">QotSub<span class="token punctuation">.</span>Response</span> rsp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Reply: QotSub: {0}  {1}\n&quot;</span><span class="token punctuation">,</span> nSerialNo<span class="token punctuation">,</span> rsp<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name">String<span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        FTAPI<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Program</span> qot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        qot<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">Qot</span> onInitConnect<span class="token punctuation">:</span> ret<span class="token operator">=</span><span class="token number">0</span> desc<span class="token operator">=</span> connID<span class="token operator">=</span><span class="token number">6819171983431767818</span>
<span class="token class-name">Send</span> QotSub<span class="token punctuation">:</span> <span class="token number">3</span>
Reply<span class="token punctuation">:</span> QotSub<span class="token punctuation">:</span> <span class="token number">3</span>  retType<span class="token punctuation">:</span> <span class="token number">0</span>
retMsg<span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
errCode<span class="token punctuation">:</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="4159-2"><a href="#4159-2" class="header-anchor">#</a> sub</h2> <p><code>int sub(QotSub.Request req);</code><br> <code>void onReply_Sub(FTAPI_Conn client, int nSerialNo, QotSub.Response rsp);</code></p> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.<br>
HK market (including underlying stocks, warrants, CBBCs, options, futures) subscriptions require LV1 and above permissions. Subscriptions are not supported under BMP permissions.<br>
US market (including underlying stocks, ETFs) subscriptions for overnight quotes require LV1 and above permissions. Subscriptions are not supported under BMP permissions.</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Qot_Common<span class="token punctuation">.</span>Security</span> securityList <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// List of security</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> subTypeList <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.SubType, list of subscription data type</span>
    <span class="token keyword">required</span> <span class="token builtin">bool</span> isSubOrUnSub <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//true means subscribe, false means unsubscribe</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isRegOrUnRegPush <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Whether to register or unregister the push of the market quotation above the link, this parameter does not specify that no registration or unregistration operation will be performed</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> regPushRehabTypeList <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.RehabType, the type of adjustment, it takes effect when registered push and candlestick type, other subscription types ignore this parameter. This parameter does not specify the default adjust forward when registering candlestick push</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isFirstPush <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//After registration, if the local data is the first push of the existing data, the default is true if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isUnsubAll <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">//One-click cancel all subscriptions currently connected, and ignore other parameters when it is set to True.</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isSubOrderBookDetail <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//Subscription display is available, whether to subscribe to display details, only supports SF market, the default is false if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> extendedTime <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow pre-market and after-hours data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> session <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow outside regular trading data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For stock structure, refer to <a href="/moomoo-api-doc/en/quote/quote.html#5792">Security</a></li> <li>For the subscription data type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a></li> <li>For stock adjustment type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7071">RehabType</a></li></ul></blockquote> <ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//RetType, returned value</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><strong>Example</strong></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QotDemo</span> <span class="token keyword">implements</span> <span class="token class-name">FTSPI_Qot</span><span class="token punctuation">,</span> <span class="token class-name">FTSPI_Conn</span> <span class="token punctuation">{</span>
    <span class="token class-name">FTAPI_Conn_Qot</span> qot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FTAPI_Conn_Qot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">QotDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        qot<span class="token punctuation">.</span><span class="token function">setClientInfo</span><span class="token punctuation">(</span><span class="token string">&quot;javaclient&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set client information</span>
        qot<span class="token punctuation">.</span><span class="token function">setConnSpi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set connection callback</span>
        qot<span class="token punctuation">.</span><span class="token function">setQotSpi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set transaction callback</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        qot<span class="token punctuation">.</span><span class="token function">initConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onInitConnect</span><span class="token punctuation">(</span><span class="token class-name">FTAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token keyword">long</span> errCode<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Qot onInitConnect: ret=%b desc=%s connID=%d\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> client<span class="token punctuation">.</span><span class="token function">getConnectID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>errCode <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token class-name">QotCommon<span class="token punctuation">.</span>Security</span> sec <span class="token operator">=</span> <span class="token class-name">QotCommon<span class="token punctuation">.</span>Security</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setMarket</span><span class="token punctuation">(</span><span class="token class-name">QotCommon<span class="token punctuation">.</span>QotMarket<span class="token punctuation">.</span>QotMarket_HK_Security_VALUE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token string">&quot;00700&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">QotSub</span><span class="token punctuation">.</span><span class="token constant">C2S</span> c2s <span class="token operator">=</span> <span class="token class-name">QotSub</span><span class="token punctuation">.</span><span class="token constant">C2S</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addSecurityList</span><span class="token punctuation">(</span>sec<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addSubTypeList</span><span class="token punctuation">(</span><span class="token class-name">QotCommon<span class="token punctuation">.</span>SubType<span class="token punctuation">.</span>SubType_Basic_VALUE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setIsSubOrUnSub</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">QotSub<span class="token punctuation">.</span>Request</span> req <span class="token operator">=</span> <span class="token class-name">QotSub<span class="token punctuation">.</span>Request</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setC2S</span><span class="token punctuation">(</span>c2s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> seqNo <span class="token operator">=</span> qot<span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Send QotSub: %d\n&quot;</span><span class="token punctuation">,</span> seqNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDisconnect</span><span class="token punctuation">(</span><span class="token class-name">FTAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token keyword">long</span> errCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Qot onDisConnect: %d\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReply_Sub</span><span class="token punctuation">(</span><span class="token class-name">FTAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token keyword">int</span> nSerialNo<span class="token punctuation">,</span> <span class="token class-name">QotSub<span class="token punctuation">.</span>Response</span> rsp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rsp<span class="token punctuation">.</span><span class="token function">getRetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;QotSub failed: %s\n&quot;</span><span class="token punctuation">,</span> rsp<span class="token punctuation">.</span><span class="token function">getRetMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">JsonFormat</span><span class="token punctuation">.</span><span class="token function">printer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>rsp<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Receive QotSub: %s\n&quot;</span><span class="token punctuation">,</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvalidProtocolBufferException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token constant">FTAPI</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">QotDemo</span> qot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QotDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        qot<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> exc<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>Send QotSub: 2
Receive QotSub: {
  &quot;retType&quot;: 0,
  &quot;retMsg&quot;: &quot;&quot;,
  &quot;errCode&quot;: 0
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="4159-3"><a href="#4159-3" class="header-anchor">#</a> Sub</h2> <p><code>Futu::u32_t Sub(const Qot_Sub::Request &amp;stReq);</code><br> <code>virtual void OnReply_Sub(Futu::u32_t nSerialNo, const Qot_Sub::Response &amp;stRsp) = 0;</code></p> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.<br>
HK market (including underlying stocks, warrants, CBBCs, options, futures) subscriptions require LV1 and above permissions. Subscriptions are not supported under BMP permissions.<br>
US market (including underlying stocks, ETFs) subscriptions for overnight quotes require LV1 and above permissions. Subscriptions are not supported under BMP permissions.</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Qot_Common<span class="token punctuation">.</span>Security</span> securityList <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// List of security</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> subTypeList <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.SubType, list of subscription data type</span>
    <span class="token keyword">required</span> <span class="token builtin">bool</span> isSubOrUnSub <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//true means subscribe, false means unsubscribe</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isRegOrUnRegPush <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Whether to register or unregister the push of the market quotation above the link, this parameter does not specify that no registration or unregistration operation will be performed</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> regPushRehabTypeList <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.RehabType, the type of adjustment, it takes effect when registered push and candlestick type, other subscription types ignore this parameter. This parameter does not specify the default adjust forward when registering candlestick push</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isFirstPush <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//After registration, if the local data is the first push of the existing data, the default is true if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isUnsubAll <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">//One-click cancel all subscriptions currently connected, and ignore other parameters when it is set to True.</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isSubOrderBookDetail <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//Subscription display is available, whether to subscribe to display details, only supports SF market, the default is false if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> extendedTime <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow pre-market and after-hours data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> session <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow outside regular trading data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For stock structure, refer to <a href="/moomoo-api-doc/en/quote/quote.html#5792">Security</a></li> <li>For the subscription data type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a></li> <li>For stock adjustment type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7071">RehabType</a></li></ul></blockquote> <ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//RetType, returned value</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><strong>Example</strong></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">Program</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">FTSPI_Qot</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">FTSPI_Trd</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">FTSPI_Conn</span></span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>

	<span class="token function">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		m_pQotApi <span class="token operator">=</span> <span class="token class-name">FTAPI</span><span class="token double-colon punctuation">::</span><span class="token function">CreateQotApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m_pQotApi<span class="token operator">-&gt;</span><span class="token function">RegisterQotSpi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m_pQotApi<span class="token operator">-&gt;</span><span class="token function">RegisterConnSpi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token operator">~</span><span class="token function">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>m_pQotApi <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			m_pQotApi<span class="token operator">-&gt;</span><span class="token function">UnregisterQotSpi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			m_pQotApi<span class="token operator">-&gt;</span><span class="token function">UnregisterConnSpi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">FTAPI</span><span class="token double-colon punctuation">::</span><span class="token function">ReleaseQotApi</span><span class="token punctuation">(</span>m_pQotApi<span class="token punctuation">)</span><span class="token punctuation">;</span>
			m_pQotApi <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		m_pQotApi<span class="token operator">-&gt;</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnInitConnect</span><span class="token punctuation">(</span>FTAPI_Conn<span class="token operator">*</span> pConn<span class="token punctuation">,</span> Futu<span class="token double-colon punctuation">::</span>i64_t nErrCode<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> strDesc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;connect&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

		<span class="token comment">// subscribe first</span>
		Qot_Sub<span class="token double-colon punctuation">::</span>Request req<span class="token punctuation">;</span>
		Qot_Sub<span class="token double-colon punctuation">::</span>C2S <span class="token operator">*</span>c2s <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">mutable_c2s</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">auto</span> secList <span class="token operator">=</span> c2s<span class="token operator">-&gt;</span><span class="token function">mutable_securitylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Qot_Common<span class="token double-colon punctuation">::</span>Security <span class="token operator">*</span>sec <span class="token operator">=</span> secList<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		sec<span class="token operator">-&gt;</span><span class="token function">set_code</span><span class="token punctuation">(</span><span class="token string">&quot;00700&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		sec<span class="token operator">-&gt;</span><span class="token function">set_market</span><span class="token punctuation">(</span>Qot_Common<span class="token double-colon punctuation">::</span>QotMarket<span class="token double-colon punctuation">::</span>QotMarket_HK_Security<span class="token punctuation">)</span><span class="token punctuation">;</span>
		c2s<span class="token operator">-&gt;</span><span class="token function">add_subtypelist</span><span class="token punctuation">(</span>Qot_Common<span class="token double-colon punctuation">::</span>SubType<span class="token double-colon punctuation">::</span>SubType_Basic<span class="token punctuation">)</span><span class="token punctuation">;</span>
		c2s<span class="token operator">-&gt;</span><span class="token function">set_isregorunregpush</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		c2s<span class="token operator">-&gt;</span><span class="token function">set_issuborunsub</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        m_SubSerialNo <span class="token operator">=</span> m_pQotApi<span class="token operator">-&gt;</span><span class="token function">Sub</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Request Sub SerialNo: &quot;</span> <span class="token operator">&lt;&lt;</span> m_SubSerialNo <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnReply_Sub</span><span class="token punctuation">(</span>Futu<span class="token double-colon punctuation">::</span>u32_t nSerialNo<span class="token punctuation">,</span> <span class="token keyword">const</span> Qot_Sub<span class="token double-colon punctuation">::</span>Response <span class="token operator">&amp;</span>stRsp<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nSerialNo <span class="token operator">==</span> m_SubSerialNo<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;OnReply_Sub SerialNo: &quot;</span> <span class="token operator">&lt;&lt;</span> nSerialNo <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>stRsp<span class="token punctuation">.</span><span class="token function">rettype</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> Common<span class="token double-colon punctuation">::</span>RetType<span class="token double-colon punctuation">::</span>RetType_Succeed<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Sub Failed&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>        

			<span class="token comment">// construct request message</span>
            Qot_GetBasicQot<span class="token double-colon punctuation">::</span>Request req<span class="token punctuation">;</span>
            Qot_GetBasicQot<span class="token double-colon punctuation">::</span>C2S <span class="token operator">*</span>c2s <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">mutable_c2s</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">auto</span> secList <span class="token operator">=</span> c2s<span class="token operator">-&gt;</span><span class="token function">mutable_securitylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Qot_Common<span class="token double-colon punctuation">::</span>Security <span class="token operator">*</span>sec <span class="token operator">=</span> secList<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sec<span class="token operator">-&gt;</span><span class="token function">set_code</span><span class="token punctuation">(</span><span class="token string">&quot;00700&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sec<span class="token operator">-&gt;</span><span class="token function">set_market</span><span class="token punctuation">(</span>Qot_Common<span class="token double-colon punctuation">::</span>QotMarket<span class="token double-colon punctuation">::</span>QotMarket_HK_Security<span class="token punctuation">)</span><span class="token punctuation">;</span>

            m_GetBasicQotSerialNo <span class="token operator">=</span> m_pQotApi<span class="token operator">-&gt;</span><span class="token function">GetBasicQot</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Request GetBasicQot SerialNo: &quot;</span> <span class="token operator">&lt;&lt;</span> m_GetBasicQotSerialNo <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnReply_GetBasicQot</span><span class="token punctuation">(</span>Futu<span class="token double-colon punctuation">::</span>u32_t nSerialNo<span class="token punctuation">,</span> <span class="token keyword">const</span> Qot_GetBasicQot<span class="token double-colon punctuation">::</span>Response <span class="token operator">&amp;</span>stRsp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nSerialNo <span class="token operator">==</span> m_GetBasicQotSerialNo<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;OnReply_GetBasicQot SerialNo: &quot;</span> <span class="token operator">&lt;&lt;</span> nSerialNo <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> 
			<span class="token comment">// print response</span>
			<span class="token comment">// ProtoBufToBodyData and UTF8ToLocal refer to tool.h in Samples</span>
            string resp_str<span class="token punctuation">;</span>
            <span class="token function">ProtoBufToBodyData</span><span class="token punctuation">(</span>stRsp<span class="token punctuation">,</span> resp_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token function">UTF8ToLocal</span><span class="token punctuation">(</span>resp_str<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
	FTAPI_Qot <span class="token operator">*</span>m_pQotApi<span class="token punctuation">;</span>

    Futu<span class="token double-colon punctuation">::</span>u32_t m_SubSerialNo<span class="token punctuation">;</span>
    Futu<span class="token double-colon punctuation">::</span>u32_t m_GetBasicQotSerialNo<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int32_t</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int32_t</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">FTAPI</span><span class="token double-colon punctuation">::</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">{</span>
		Program program<span class="token punctuation">;</span>
		program<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	protobuf<span class="token double-colon punctuation">::</span><span class="token function">ShutdownProtobufLibrary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">FTAPI</span><span class="token double-colon punctuation">::</span><span class="token function">UnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>connect
Request Sub SerialNo: 3
OnReply_Sub SerialNo: 3
Request GetBasicQot SerialNo: 4
OnReply_GetBasicQot SerialNo: 4
{
 &quot;retType&quot;: 0,
 &quot;retMsg&quot;: &quot;&quot;,
 &quot;errCode&quot;: 0,
 &quot;s2c&quot;: {
  &quot;basicQotList&quot;: [
   {
    &quot;security&quot;: {
     &quot;market&quot;: 1,
     &quot;code&quot;: &quot;00700&quot;
    },
    &quot;isSuspended&quot;: false,
    &quot;listTime&quot;: &quot;2004-06-16&quot;,
    &quot;priceSpread&quot;: 0.5,
    &quot;updateTime&quot;: &quot;2021-06-09 14:08:24&quot;,
    &quot;highPrice&quot;: 606,
    &quot;openPrice&quot;: 600,
    &quot;lowPrice&quot;: 597.5,
    &quot;curPrice&quot;: 601.5,
    &quot;lastClosePrice&quot;: 601,
    &quot;volume&quot;: &quot;4283211&quot;,
    &quot;turnover&quot;: 2579419163,
    &quot;turnoverRate&quot;: 0.045,
    &quot;amplitude&quot;: 1.414,
    &quot;darkStatus&quot;: 0,
    &quot;listTimestamp&quot;: 1087315200,
    &quot;updateTimestamp&quot;: 1623218904,
    &quot;secStatus&quot;: 1
   }
  ]
 }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="4159-4"><a href="#4159-4" class="header-anchor">#</a> Sub</h2> <p><code>Sub(req);</code></p> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.<br>
HK market (including underlying stocks, warrants, CBBCs, options, futures) subscriptions require LV1 and above permissions. Subscriptions are not supported under BMP permissions.<br>
US market (including underlying stocks, ETFs) subscriptions for overnight quotes require LV1 and above permissions. Subscriptions are not supported under BMP permissions.</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Qot_Common<span class="token punctuation">.</span>Security</span> securityList <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// List of security</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> subTypeList <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.SubType, list of subscription data type</span>
    <span class="token keyword">required</span> <span class="token builtin">bool</span> isSubOrUnSub <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//true means subscribe, false means unsubscribe</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isRegOrUnRegPush <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Whether to register or unregister the push of the market quotation above the link, this parameter does not specify that no registration or unregistration operation will be performed</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> regPushRehabTypeList <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.RehabType, the type of adjustment, it takes effect when registered push and candlestick type, other subscription types ignore this parameter. This parameter does not specify the default adjust forward when registering candlestick push</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isFirstPush <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//After registration, if the local data is the first push of the existing data, the default is true if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isUnsubAll <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">//One-click cancel all subscriptions currently connected, and ignore other parameters when it is set to True.</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isSubOrderBookDetail <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//Subscription display is available, whether to subscribe to display details, only supports SF market, the default is false if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> extendedTime <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow pre-market and after-hours data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> session <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow outside regular trading data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For stock structure, refer to <a href="/moomoo-api-doc/en/quote/quote.html#5792">Security</a></li> <li>For the subscription data type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a></li> <li>For stock adjustment type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7071">RehabType</a></li></ul></blockquote> <ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//RetType, returned value</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><strong>Example</strong></li></ul> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> ftWebsocket <span class="token keyword">from</span> <span class="token string">&quot;futu-api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ftCmdID <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;futu-api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Common<span class="token punctuation">,</span> Qot_Common <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;futu-api/proto&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> RetType <span class="token punctuation">}</span> <span class="token operator">=</span> Common
    <span class="token keyword">const</span> <span class="token punctuation">{</span> SubType<span class="token punctuation">,</span> QotMarket <span class="token punctuation">}</span> <span class="token operator">=</span> Qot_Common
    <span class="token keyword">let</span> <span class="token punctuation">[</span>addr<span class="token punctuation">,</span> port<span class="token punctuation">,</span> enable_ssl<span class="token punctuation">,</span> key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">33333</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'XXXXX'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> websocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ftWebsocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    websocket<span class="token punctuation">.</span><span class="token function-variable function">onlogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">ret<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">c2s</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">securityList</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">market</span><span class="token operator">:</span> QotMarket<span class="token punctuation">.</span>QotMarket_HK_Security<span class="token punctuation">,</span>
                        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&quot;00700&quot;</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token literal-property property">subTypeList</span><span class="token operator">:</span> <span class="token punctuation">[</span> SubType<span class="token punctuation">.</span>SubType_OrderBook <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Subscription OrderBook data</span>
                <span class="token literal-property property">isSubOrUnSub</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">isRegOrUnRegPush</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span> 

            websocket<span class="token punctuation">.</span><span class="token function">Sub</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span> <span class="token comment">//# Subscribe to the order type, OpenD starts to receive continuous push from the server</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
                <span class="token keyword">let</span> <span class="token punctuation">{</span> errCode<span class="token punctuation">,</span> retMsg<span class="token punctuation">,</span> retType <span class="token punctuation">}</span> <span class="token operator">=</span> res
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;subscribe: errCode %d, retMsg %s, retType %d&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">,</span> retMsg<span class="token punctuation">,</span> retType<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;retMsg&quot;</span> <span class="token keyword">in</span> error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error:&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>retMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    websocket<span class="token punctuation">.</span><span class="token function-variable function">onPush</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">cmd<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>ftCmdID<span class="token punctuation">.</span>QotUpdateOrderBook<span class="token punctuation">.</span>cmd <span class="token operator">==</span> cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> <span class="token punctuation">{</span> retType<span class="token punctuation">,</span> s2c <span class="token punctuation">}</span> <span class="token operator">=</span> res
            <span class="token keyword">if</span><span class="token punctuation">(</span>retType <span class="token operator">==</span> RetType<span class="token punctuation">.</span>RetType_Succeed<span class="token punctuation">)</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;OrderBookTest&quot;</span><span class="token punctuation">,</span> s2c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;OrderBookTest: error&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    websocket<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> port<span class="token punctuation">,</span> enable_ssl<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// After using the connection, remember to close it to prevent the number of connections from running out</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
        websocket<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set the script to receive OpenD push duration to 5 seconds</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">subscribe</span><span class="token operator">:</span> errCode <span class="token number">0</span><span class="token punctuation">,</span> retMsg <span class="token punctuation">,</span> retType <span class="token number">0</span>
OrderBookTest <span class="token punctuation">{</span><span class="token string-property property">&quot;security&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;market&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">&quot;code&quot;</span><span class="token operator">:</span><span class="token string">&quot;00700&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orderBookAskList&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">492.6</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;32300&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">55</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">492.8</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;14100&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">493</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;25200&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">493.2</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;12300&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">493.4</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;9000&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">493.6</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;13500&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">493.8</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;9800&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">494</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;10500&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">494.2</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;6100&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">494.4</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;11400&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orderBookBidList&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">492.4</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;30600&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">59</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">492.2</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;29800&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">49</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">492</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;97900&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">120</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">491.8</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;24700&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">55</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">491.6</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;35300&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">491.4</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;11200&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">491.2</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;29300&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">39</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">491</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;77900&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">229</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">490.8</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;14100&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">39</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">490.6</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;22800&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">34</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
OrderBookTest <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token operator">...</span>
<span class="token operator">...</span>
stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div> <div class="custom-block tip"><p class="custom-block-title">Interface Limitations</p> <ul><li>Supports subscriptions of multiple real-time data types, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a>, each stock subscription for one one quota.</li> <li>Please refer to <a href="/moomoo-api-doc/en/intro/authority.html#9123">Subscription Quota &amp; Historical Candlestick Quota</a> for Subscription Quota rules.</li> <li>You can unsubscribe after subscribing after at least one minute.</li> <li>Due to the large amount of SF market data in Hong Kong stocks, in order to ensure the speed of the SF market and the processing performance of OpenD, currently SF authorized users are limited to subscribing to 50 security products (including hkex stocks, warrants, bulls and bears) at the same time, the remaining subscription quota can still be used to subscribe to other types, such as: tickers and brokerage etc.</li> <li>HK options and futures do not support subscription to <em>TICKER</em> type under LV1 authority.</li></ul></div></div><div class="tab-content" style="display:;"><div class="ft-switcher"><div class="tab-header" style="display:none;"><ul><li class="active"> Python
            </li><li> Proto
            </li><li> C#
            </li><li> Java
            </li><li> C++
            </li><li> JavaScript
            </li></ul></div> <div class="tab-content" style="display:;"><h2 id="5009"><a href="#5009" class="header-anchor">#</a> subscribe</h2> <p><code>subscribe(code_list, subtype_list, is_first_push=True, subscribe_push=True, is_detailed_orderbook=False, extended_time=False, session=Session.NONE)</code></p> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.<br>
HK market (including underlying stocks, warrants, CBBCs, options, futures) subscriptions require LV1 and above permissions. Subscriptions are not supported under BMP permissions.<br>
US market (including underlying stocks, ETFs) subscriptions for overnight quotes require LV1 and above permissions. Subscriptions are not supported under BMP permissions.</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">code_list</td> <td style="text-align:left;">list</td> <td style="text-align:left;">A list of stock codes that need to be subscribed. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Data type of elements in the list is str.</div></div></div></div></td></tr> <tr><td style="text-align:left;">subtype_list</td> <td style="text-align:left;">list</td> <td style="text-align:left;">List of data types that need to be subscribed. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Data type of elements in the list is <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a>.</div></div></div></div></td></tr> <tr><td style="text-align:left;">is_first_push</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to push the cached data immediately after a successful subscription. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content"><ul><li>True: Push the cached data. When there is a disconnection and reconnection between scripts and OpenD, the last data before the disconnection will be pushed again if it is set to True when resubscribing.</li><li>False: Do not push the cached data. Wait for the latest data to be pushed from moomoo server.</li></ul></div></div></div></div></td></tr> <tr><td style="text-align:left;">subscribe_push</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to push data after subscription.<div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">After subscription, OpenD provides <a href="/moomoo-api-doc/en/qa/quote.html#5505">two methods to obtain data</a>. If you only use the method of <strong>Get Real-time Data</strong> , setting to False can save part of the performance cost.<ul><li>True: Push data. It must be set to True if the <strong>Real-time data Callback</strong> method is used.</li><li>False: Do not push data. It is recommended to set to False if <strong>only</strong> using the <strong>Get Real-time Data</strong>.</li></ul></div></div></div></div></td></tr> <tr><td style="text-align:left;">is_detailed_orderbook</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to subscribe to the detailed order book. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content"><ul><li>Only for Hong Kong stocks ORDER_BOOK type under the authority of Hong Kong stocks SF market. </li><li>Under the authority of US stocks &amp; futures LV2, the detailed order book is not provided.</li></ul></div></div></div></div></td></tr> <tr><td style="text-align:left;">extended_time</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Whether to allow pre-market and after-hours data of US stocks. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Only used for subscribing to real-time candlestick and real-time Time Frame and real-time tick-by-tick of US stocks.</div></div></div></div></td></tr> <tr><td style="text-align:left;">session</td> <td style="text-align:left;"><a href="/moomoo-api-doc/en/quote/quote.html#8688">Session</a></td> <td style="text-align:left;">US stocks quotes session <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content"><ul><li>Only used for subscribing to real-time candlestick and real-time Time Frame and real-time tick-by-tick of US stocks.</li><li>Please choose 'ALL' to subscribe 24H quotes for US stocks. The 'OVERNIGHT' is not allowed.</li><li>Minimum version requirements: 9.2.4207</li></ul></div></div></div></div></td></tr></tbody></table></li></ul> <ul><li><p><strong>Return</strong></p> <table><tr><th>Field</th> <th>Type</th> <th>Description</th></tr> <tr><td>ret</td> <td><a href="../ftapi/common.html#8800"> RET_CODE</a></td> <td>Interface result.</td></tr> <tr><td rowspan="2">err_message</td> <td>NoneType</td> <td>If ret == RET_OK, None is returned.</td></tr> <tr><td>str</td> <td>If ret != RET_OK, error description is returned.</td></tr></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> time
<span class="token keyword">from</span> moomoo <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">class</span> <span class="token class-name">OrderBookTest</span><span class="token punctuation">(</span>OrderBookHandlerBase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">on_recv_rsp</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> rsp_pb<span class="token punctuation">)</span><span class="token punctuation">:</span>
        ret_code<span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span>OrderBookTest<span class="token punctuation">,</span>self<span class="token punctuation">)</span><span class="token punctuation">.</span>on_recv_rsp<span class="token punctuation">(</span>rsp_pb<span class="token punctuation">)</span>
        <span class="token keyword">if</span> ret_code <span class="token operator">!=</span> RET_OK<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;OrderBookTest: error, msg: %s&quot;</span><span class="token operator">%</span> data<span class="token punctuation">)</span>
            <span class="token keyword">return</span> RET_ERROR<span class="token punctuation">,</span> data
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;OrderBookTest &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment"># OrderBookTest's own processing logic</span>
        <span class="token keyword">return</span> RET_OK<span class="token punctuation">,</span> data
quote_ctx <span class="token operator">=</span> OpenQuoteContext<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">11111</span><span class="token punctuation">)</span>
handler <span class="token operator">=</span> OrderBookTest<span class="token punctuation">(</span><span class="token punctuation">)</span>
quote_ctx<span class="token punctuation">.</span>set_handler<span class="token punctuation">(</span>handler<span class="token punctuation">)</span> <span class="token comment"># Set real-time swing callback</span>
quote_ctx<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>SubType<span class="token punctuation">.</span>ORDER_BOOK<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># Subscribe to the order type, OpenD starts to receive continuous push from the server</span>
time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span> <span class="token comment"># Set the script to receive OpenD push duration to 15 seconds</span>
quote_ctx<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Close the current link, OpenD will automatically cancel the corresponding type of subscription for the corresponding stock after 1 minute</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>OrderBookTest  <span class="token punctuation">{</span><span class="token string">'code'</span><span class="token punctuation">:</span> <span class="token string">'US.AAPL'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'Apple'</span><span class="token punctuation">,</span> <span class="token string">'svr_recv_time_bid'</span><span class="token punctuation">:</span> <span class="token string">'2025-04-07 05:00:52.266'</span><span class="token punctuation">,</span> <span class="token string">'svr_recv_time_ask'</span><span class="token punctuation">:</span> <span class="token string">'2025-04-07 05:00:53.973'</span><span class="token punctuation">,</span> <span class="token string">'Bid'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">180.2</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.19</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.18</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.14</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.13</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.1</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.05</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.03</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.02</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.01</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.0</span><span class="token punctuation">,</span> <span class="token number">441</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'Ask'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">180.3</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.38</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.4</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.42</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.46</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.5</span><span class="token punctuation">,</span> <span class="token number">1019</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.6</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.8</span><span class="token punctuation">,</span> <span class="token number">2001</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">180.84</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.0</span><span class="token punctuation">,</span> <span class="token number">2036</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.2</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.4</span><span class="token punctuation">,</span> <span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.5</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.79</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.8</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.9</span><span class="token punctuation">,</span> <span class="token number">94</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">181.98</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">182.0</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="1052"><a href="#1052" class="header-anchor">#</a> unsubscribe</h2> <p><code>unsubscribe(code_list, subtype_list, unsubscribe_all=False)</code></p> <ul><li><p><strong>Description</strong></p> <p>unsubscribe</p></li> <li><p><strong>Parameters</strong></p> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;">code_list</td> <td style="text-align:left;">list</td> <td style="text-align:left;">A list of stock codes to unsubscribe. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Data type of elements in the list is str.</div></div></div></div></td></tr> <tr><td style="text-align:left;">subtype_list</td> <td style="text-align:left;">list</td> <td style="text-align:left;">List of data types that need to be subscribed. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Data type of elements in the list is <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a>.</div></div></div></div></td></tr> <tr><td style="text-align:left;">unsubscribe_all</td> <td style="text-align:left;">bool</td> <td style="text-align:left;">Cancel all subscriptions. <div class="fttip-wrapper"><button type="button" class="fttip-title"><span> </span> <img src="/moomoo-api-doc/img/tip.png" class="tip"></button> <div class="fttip-dropdown" style="display:none;"><div class="fttip-layout"><span class="fttip-uparrow"></span> <span class="fttip-uparrow2"></span> <div class="fttip-content">Ignore other parameters when it is True.</div></div></div></div></td></tr></tbody></table></li></ul> <ul><li><p><strong>Return</strong></p> <table><tr><th>Field</th> <th>Type</th> <th>Description</th></tr> <tr><td>ret</td> <td><a href="../ftapi/common.html#8800"> RET_CODE</a></td> <td>Interface result.</td></tr> <tr><td rowspan="2">err_message</td> <td>NoneType</td> <td>If ret == RET_OK, None is returned.</td></tr> <tr><td>str</td> <td>If ret != RET_OK, error description is returned.</td></tr></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> moomoo <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">import</span> time
quote_ctx <span class="token operator">=</span> OpenQuoteContext<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">11111</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'current subscription status :'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query the initial subscription status</span>
ret_sub<span class="token punctuation">,</span> err_message <span class="token operator">=</span> quote_ctx<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>SubType<span class="token punctuation">.</span>QUOTE<span class="token punctuation">,</span> SubType<span class="token punctuation">.</span>TICKER<span class="token punctuation">]</span><span class="token punctuation">,</span> subscribe_push<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> session<span class="token operator">=</span>Session<span class="token punctuation">.</span>ALL<span class="token punctuation">)</span>
<span class="token comment"># First subscribed to the two types of QUOTE and TICKER. After the subscription is successful, OpenD will continue to receive pushes from the server, False means that there is no need to push to the script temporarily</span>
<span class="token keyword">if</span> ret_sub <span class="token operator">==</span> RET_OK<span class="token punctuation">:</span> <span class="token comment"># Subscription successful</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'subscribe successfully! current subscription status :'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query subscription status after successful subscription</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token comment"># You can unsubscribe at least 1 minute after subscribing</span>
    ret_unsub<span class="token punctuation">,</span> err_message_unsub <span class="token operator">=</span> quote_ctx<span class="token punctuation">.</span>unsubscribe<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>SubType<span class="token punctuation">.</span>QUOTE<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> ret_unsub <span class="token operator">==</span> RET_OK<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'unsubscribe successfully! current subscription status:'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query the subscription status after canceling the subscription</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'unsubscription failed!'</span><span class="token punctuation">,</span> err_message_unsub<span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'subscription failed'</span><span class="token punctuation">,</span> err_message<span class="token punctuation">)</span>
quote_ctx<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># After using the connection, remember to close it to prevent the number of connections from running out</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>current subscription status <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
subscribe successfully！current subscription status <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">998</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'QUOTE'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'TICKER'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
unsubscribe successfully！current subscription status<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">999</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'TICKER'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="771"><a href="#771" class="header-anchor">#</a> unsubscribe_all</h2> <p><code>unsubscribe_all()</code></p> <ul><li><p><strong>Description</strong></p> <p>Unsubscribe all subscriptions</p></li></ul> <ul><li><p><strong>Return</strong></p> <table><tr><th>Field</th> <th>Type</th> <th>Description</th></tr> <tr><td>ret</td> <td><a href="../ftapi/common.html#8800"> RET_CODE</a></td> <td>Interface result.</td></tr> <tr><td rowspan="2">err_message</td> <td>NoneType</td> <td>If ret == RET_OK, None is returned.</td></tr> <tr><td>str</td> <td>If ret != RET_OK, error description is returned.</td></tr></table></li> <li><p><strong>Example</strong></p></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> moomoo <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">import</span> time
quote_ctx <span class="token operator">=</span> OpenQuoteContext<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">11111</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'current subscription status :'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query the initial subscription status</span>
ret_sub<span class="token punctuation">,</span> err_message <span class="token operator">=</span> quote_ctx<span class="token punctuation">.</span>subscribe<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>SubType<span class="token punctuation">.</span>QUOTE<span class="token punctuation">,</span> SubType<span class="token punctuation">.</span>TICKER<span class="token punctuation">]</span><span class="token punctuation">,</span> subscribe_push<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> session<span class="token operator">=</span>Session<span class="token punctuation">.</span>ALL<span class="token punctuation">)</span>
<span class="token comment"># First subscribed to the two types of QUOTE and TICKER. After the subscription is successful, OpenD will continue to receive pushes from the server, False means that there is no need to push to the script temporarily</span>
<span class="token keyword">if</span> ret_sub <span class="token operator">==</span> RET_OK<span class="token punctuation">:</span> <span class="token comment"># Subscription successful</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'subscribe successfully! current subscription status :'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query subscription status after successful subscription</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token comment"># You can unsubscribe at least 1 minute after subscribing</span>
    ret_unsub<span class="token punctuation">,</span> err_message_unsub <span class="token operator">=</span> quote_ctx<span class="token punctuation">.</span>unsubscribe_all<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Cancel all subscriptions</span>
    <span class="token keyword">if</span> ret_unsub <span class="token operator">==</span> RET_OK<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'unsubscribe all successfully! current subscription status:'</span><span class="token punctuation">,</span> quote_ctx<span class="token punctuation">.</span>query_subscription<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># Query the subscription status after canceling the subscription</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Failed to cancel all subscriptions！'</span><span class="token punctuation">,</span> err_message_unsub<span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'subscription failed'</span><span class="token punctuation">,</span> err_message<span class="token punctuation">)</span>
quote_ctx<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># After using the connection, remember to close it to prevent the number of connections from running out</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-python line-numbers-mode"><pre class="language-python"><code>current subscription status <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
subscribe successfully！current subscription status <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">998</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'QUOTE'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'TICKER'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'US.AAPL'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
unsubscribe <span class="token builtin">all</span> successfully！current subscription status<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'total_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'remain'</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'own_used'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'sub_list'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="3789-2"><a href="#3789-2" class="header-anchor">#</a> Qot_Sub.proto</h2> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Qot_Common<span class="token punctuation">.</span>Security</span> securityList <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// List of security</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> subTypeList <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.SubType, list of subscription data type</span>
    <span class="token keyword">required</span> <span class="token builtin">bool</span> isSubOrUnSub <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//true means subscribe, false means unsubscribe</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isRegOrUnRegPush <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Whether to register or unregister the push of the market quotation above the link, this parameter does not specify that no registration or unregistration operation will be performed</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> regPushRehabTypeList <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.RehabType, the type of adjustment, it takes effect when registered push and candlestick type, other subscription types ignore this parameter. This parameter does not specify the default adjust forward when registering candlestick push</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isFirstPush <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//After registration, if the local data is the first push of the existing data, the default is true if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isUnsubAll <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">//One-click cancel all subscriptions currently connected, and ignore other parameters when it is set to True.</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isSubOrderBookDetail <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//Subscription display is available, whether to subscribe to display details, only supports SF market, the default is false if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> extendedTime <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow pre-market and after-hours data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> session <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow outside regular trading data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For stock structure, refer to <a href="/moomoo-api-doc/en/quote/quote.html#5792">Security</a></li> <li>For the subscription data type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a></li> <li>For stock adjustment type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7071">RehabType</a></li></ul></blockquote> <ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//RetType, returned value</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><p><strong>Protocol ID</strong></p> <p>3001</p></li></ul></div><div class="tab-content" style="display:none;"><h2 id="4159-5"><a href="#4159-5" class="header-anchor">#</a> Sub</h2> <p><code>uint Sub(QotSub.Request req);</code><br> <code>virtual void OnReply_Sub(MMAPI_Conn client, uint nSerialNo, QotSub.Response rsp);</code></p> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Qot_Common<span class="token punctuation">.</span>Security</span> securityList <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// List of security</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> subTypeList <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.SubType, list of subscription data type</span>
    <span class="token keyword">required</span> <span class="token builtin">bool</span> isSubOrUnSub <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//true means subscribe, false means unsubscribe</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isRegOrUnRegPush <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Whether to register or unregister the push of the market quotation above the link, this parameter does not specify that no registration or unregistration operation will be performed</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> regPushRehabTypeList <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.RehabType, the type of adjustment, it takes effect when registered push and candlestick type, other subscription types ignore this parameter. This parameter does not specify the default adjust forward when registering candlestick push</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isFirstPush <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//After registration, if the local data is the first push of the existing data, the default is true if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isUnsubAll <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">//One-click cancel all subscriptions currently connected, and ignore other parameters when it is set to True.</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isSubOrderBookDetail <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//Subscription display is available, whether to subscribe to display details, only supports SF market, the default is false if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> extendedTime <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow pre-market and after-hours data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> session <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow outside regular trading data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For stock structure, refer to <a href="/moomoo-api-doc/en/quote/quote.html#5792">Security</a></li> <li>For the subscription data type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a></li> <li>For stock adjustment type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7071">RehabType</a></li></ul></blockquote> <ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//RetType, returned value</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><strong>Example</strong></li></ul> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span><span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MMSPI_Qot</span><span class="token punctuation">,</span> <span class="token class-name">MMSPI_Conn</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">MMAPI_Qot</span> qot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MMAPI_Qot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        qot<span class="token punctuation">.</span><span class="token function">SetClientInfo</span><span class="token punctuation">(</span><span class="token string">&quot;csharp&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set client information</span>
        qot<span class="token punctuation">.</span><span class="token function">SetConnCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set connection callback</span>
        qot<span class="token punctuation">.</span><span class="token function">SetQotCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set transaction callback</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        qot<span class="token punctuation">.</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnInitConnect</span><span class="token punctuation">(</span><span class="token class-name">MMAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> errCode<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Qot onInitConnect: ret={0} desc={1} connID={2}\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> client<span class="token punctuation">.</span><span class="token function">GetConnectID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>errCode <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token class-name">QotCommon<span class="token punctuation">.</span>Security</span> sec <span class="token operator">=</span> QotCommon<span class="token punctuation">.</span>Security<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">SetMarket</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>QotCommon<span class="token punctuation">.</span>QotMarket<span class="token punctuation">.</span>QotMarket_HK_Security<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">SetCode</span><span class="token punctuation">(</span><span class="token string">&quot;00700&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">QotSub<span class="token punctuation">.</span>C2S</span> c2s <span class="token operator">=</span> QotSub<span class="token punctuation">.</span>C2S<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">AddSecurityList</span><span class="token punctuation">(</span>sec<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">AddSubTypeList</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>QotCommon<span class="token punctuation">.</span>SubType<span class="token punctuation">.</span>SubType_Basic<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">SetIsSubOrUnSub</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">QotSub<span class="token punctuation">.</span>Request</span> req <span class="token operator">=</span> QotSub<span class="token punctuation">.</span>Request<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetC2S</span><span class="token punctuation">(</span>c2s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">uint</span></span> seqNo <span class="token operator">=</span> qot<span class="token punctuation">.</span><span class="token function">Sub</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Send QotSub: {0}\n&quot;</span><span class="token punctuation">,</span> seqNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDisconnect</span><span class="token punctuation">(</span><span class="token class-name">MMAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">long</span></span> errCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Qot onDisConnect: {0}\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnReply_Sub</span><span class="token punctuation">(</span><span class="token class-name">MMAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">uint</span></span> nSerialNo<span class="token punctuation">,</span> <span class="token class-name">QotSub<span class="token punctuation">.</span>Response</span> rsp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;Reply: QotSub: {0}  {1}\n&quot;</span><span class="token punctuation">,</span> nSerialNo<span class="token punctuation">,</span> rsp<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name">String<span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        MMAPI<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Program</span> qot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        qot<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            Thread<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code><span class="token class-name">Qot</span> onInitConnect<span class="token punctuation">:</span> ret<span class="token operator">=</span><span class="token number">0</span> desc<span class="token operator">=</span> connID<span class="token operator">=</span><span class="token number">6819171983431767818</span>
<span class="token class-name">Send</span> QotSub<span class="token punctuation">:</span> <span class="token number">3</span>
Reply<span class="token punctuation">:</span> QotSub<span class="token punctuation">:</span> <span class="token number">3</span>  retType<span class="token punctuation">:</span> <span class="token number">0</span>
retMsg<span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span>
errCode<span class="token punctuation">:</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="4159-6"><a href="#4159-6" class="header-anchor">#</a> sub</h2> <p><code>int sub(QotSub.Request req);</code><br> <code>void onReply_Sub(MMAPI_Conn client, int nSerialNo, QotSub.Response rsp);</code></p> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Qot_Common<span class="token punctuation">.</span>Security</span> securityList <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// List of security</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> subTypeList <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.SubType, list of subscription data type</span>
    <span class="token keyword">required</span> <span class="token builtin">bool</span> isSubOrUnSub <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//true means subscribe, false means unsubscribe</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isRegOrUnRegPush <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Whether to register or unregister the push of the market quotation above the link, this parameter does not specify that no registration or unregistration operation will be performed</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> regPushRehabTypeList <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.RehabType, the type of adjustment, it takes effect when registered push and candlestick type, other subscription types ignore this parameter. This parameter does not specify the default adjust forward when registering candlestick push</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isFirstPush <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//After registration, if the local data is the first push of the existing data, the default is true if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isUnsubAll <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">//One-click cancel all subscriptions currently connected, and ignore other parameters when it is set to True.</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isSubOrderBookDetail <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//Subscription display is available, whether to subscribe to display details, only supports SF market, the default is false if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> extendedTime <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow pre-market and after-hours data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> session <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow outside regular trading data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For stock structure, refer to <a href="/moomoo-api-doc/en/quote/quote.html#5792">Security</a></li> <li>For the subscription data type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a></li> <li>For stock adjustment type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7071">RehabType</a></li></ul></blockquote> <ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//RetType, returned value</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><strong>Example</strong></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QotDemo</span> <span class="token keyword">implements</span> <span class="token class-name">MMSPI_Qot</span><span class="token punctuation">,</span> <span class="token class-name">MMSPI_Conn</span> <span class="token punctuation">{</span>
    <span class="token class-name">MMAPI_Conn_Qot</span> qot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MMAPI_Conn_Qot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">QotDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        qot<span class="token punctuation">.</span><span class="token function">setClientInfo</span><span class="token punctuation">(</span><span class="token string">&quot;javaclient&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set client information</span>
        qot<span class="token punctuation">.</span><span class="token function">setConnSpi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set connection callback</span>
        qot<span class="token punctuation">.</span><span class="token function">setQotSpi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Set transaction callback</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        qot<span class="token punctuation">.</span><span class="token function">initConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span><span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onInitConnect</span><span class="token punctuation">(</span><span class="token class-name">MMAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token keyword">long</span> errCode<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Qot onInitConnect: ret=%b desc=%s connID=%d\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> client<span class="token punctuation">.</span><span class="token function">getConnectID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>errCode <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>

        <span class="token class-name">QotCommon<span class="token punctuation">.</span>Security</span> sec <span class="token operator">=</span> <span class="token class-name">QotCommon<span class="token punctuation">.</span>Security</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setMarket</span><span class="token punctuation">(</span><span class="token class-name">QotCommon<span class="token punctuation">.</span>QotMarket<span class="token punctuation">.</span>QotMarket_HK_Security_VALUE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token string">&quot;00700&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">QotSub</span><span class="token punctuation">.</span><span class="token constant">C2S</span> c2s <span class="token operator">=</span> <span class="token class-name">QotSub</span><span class="token punctuation">.</span><span class="token constant">C2S</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addSecurityList</span><span class="token punctuation">(</span>sec<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addSubTypeList</span><span class="token punctuation">(</span><span class="token class-name">QotCommon<span class="token punctuation">.</span>SubType<span class="token punctuation">.</span>SubType_Basic_VALUE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setIsSubOrUnSub</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">QotSub<span class="token punctuation">.</span>Request</span> req <span class="token operator">=</span> <span class="token class-name">QotSub<span class="token punctuation">.</span>Request</span><span class="token punctuation">.</span><span class="token function">newBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setC2S</span><span class="token punctuation">(</span>c2s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> seqNo <span class="token operator">=</span> qot<span class="token punctuation">.</span><span class="token function">sub</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Send QotSub: %d\n&quot;</span><span class="token punctuation">,</span> seqNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDisconnect</span><span class="token punctuation">(</span><span class="token class-name">MMAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token keyword">long</span> errCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Qot onDisConnect: %d\n&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReply_Sub</span><span class="token punctuation">(</span><span class="token class-name">MMAPI_Conn</span> client<span class="token punctuation">,</span> <span class="token keyword">int</span> nSerialNo<span class="token punctuation">,</span> <span class="token class-name">QotSub<span class="token punctuation">.</span>Response</span> rsp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rsp<span class="token punctuation">.</span><span class="token function">getRetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;QotSub failed: %s\n&quot;</span><span class="token punctuation">,</span> rsp<span class="token punctuation">.</span><span class="token function">getRetMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> json <span class="token operator">=</span> <span class="token class-name">JsonFormat</span><span class="token punctuation">.</span><span class="token function">printer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>rsp<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Receive QotSub: %s\n&quot;</span><span class="token punctuation">,</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvalidProtocolBufferException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token constant">MMAPI</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">QotDemo</span> qot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QotDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        qot<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> exc<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>Send QotSub: 2
Receive QotSub: {
  &quot;retType&quot;: 0,
  &quot;retMsg&quot;: &quot;&quot;,
  &quot;errCode&quot;: 0
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="4159-7"><a href="#4159-7" class="header-anchor">#</a> Sub</h2> <p><code>moomoo::u32_t Sub(const Qot_Sub::Request &amp;stReq);</code><br> <code>virtual void OnReply_Sub(moomoo::u32_t nSerialNo, const Qot_Sub::Response &amp;stRsp) = 0;</code></p> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Qot_Common<span class="token punctuation">.</span>Security</span> securityList <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// List of security</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> subTypeList <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.SubType, list of subscription data type</span>
    <span class="token keyword">required</span> <span class="token builtin">bool</span> isSubOrUnSub <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//true means subscribe, false means unsubscribe</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isRegOrUnRegPush <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Whether to register or unregister the push of the market quotation above the link, this parameter does not specify that no registration or unregistration operation will be performed</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> regPushRehabTypeList <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.RehabType, the type of adjustment, it takes effect when registered push and candlestick type, other subscription types ignore this parameter. This parameter does not specify the default adjust forward when registering candlestick push</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isFirstPush <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//After registration, if the local data is the first push of the existing data, the default is true if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isUnsubAll <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">//One-click cancel all subscriptions currently connected, and ignore other parameters when it is set to True.</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isSubOrderBookDetail <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//Subscription display is available, whether to subscribe to display details, only supports SF market, the default is false if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> extendedTime <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow pre-market and after-hours data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> session <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow outside regular trading data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For stock structure, refer to <a href="/moomoo-api-doc/en/quote/quote.html#5792">Security</a></li> <li>For the subscription data type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a></li> <li>For stock adjustment type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7071">RehabType</a></li></ul></blockquote> <ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//RetType, returned value</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><strong>Example</strong></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">Program</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">MMSPI_Qot</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">MMSPI_Trd</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">MMSPI_Conn</span></span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>

	<span class="token function">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		m_pQotApi <span class="token operator">=</span> <span class="token class-name">MMAPI</span><span class="token double-colon punctuation">::</span><span class="token function">CreateQotApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m_pQotApi<span class="token operator">-&gt;</span><span class="token function">RegisterQotSpi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		m_pQotApi<span class="token operator">-&gt;</span><span class="token function">RegisterConnSpi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token operator">~</span><span class="token function">Program</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>m_pQotApi <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			m_pQotApi<span class="token operator">-&gt;</span><span class="token function">UnregisterQotSpi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			m_pQotApi<span class="token operator">-&gt;</span><span class="token function">UnregisterConnSpi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">MMAPI</span><span class="token double-colon punctuation">::</span><span class="token function">ReleaseQotApi</span><span class="token punctuation">(</span>m_pQotApi<span class="token punctuation">)</span><span class="token punctuation">;</span>
			m_pQotApi <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		m_pQotApi<span class="token operator">-&gt;</span><span class="token function">InitConnect</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">11111</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnInitConnect</span><span class="token punctuation">(</span>MMAPI_Conn<span class="token operator">*</span> pConn<span class="token punctuation">,</span> moomoo<span class="token double-colon punctuation">::</span>i64_t nErrCode<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> strDesc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;connect&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

		<span class="token comment">// subscribe first</span>
		Qot_Sub<span class="token double-colon punctuation">::</span>Request req<span class="token punctuation">;</span>
		Qot_Sub<span class="token double-colon punctuation">::</span>C2S <span class="token operator">*</span>c2s <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">mutable_c2s</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">auto</span> secList <span class="token operator">=</span> c2s<span class="token operator">-&gt;</span><span class="token function">mutable_securitylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Qot_Common<span class="token double-colon punctuation">::</span>Security <span class="token operator">*</span>sec <span class="token operator">=</span> secList<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		sec<span class="token operator">-&gt;</span><span class="token function">set_code</span><span class="token punctuation">(</span><span class="token string">&quot;00700&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		sec<span class="token operator">-&gt;</span><span class="token function">set_market</span><span class="token punctuation">(</span>Qot_Common<span class="token double-colon punctuation">::</span>QotMarket<span class="token double-colon punctuation">::</span>QotMarket_HK_Security<span class="token punctuation">)</span><span class="token punctuation">;</span>
		c2s<span class="token operator">-&gt;</span><span class="token function">add_subtypelist</span><span class="token punctuation">(</span>Qot_Common<span class="token double-colon punctuation">::</span>SubType<span class="token double-colon punctuation">::</span>SubType_Basic<span class="token punctuation">)</span><span class="token punctuation">;</span>
		c2s<span class="token operator">-&gt;</span><span class="token function">set_isregorunregpush</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		c2s<span class="token operator">-&gt;</span><span class="token function">set_issuborunsub</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        m_SubSerialNo <span class="token operator">=</span> m_pQotApi<span class="token operator">-&gt;</span><span class="token function">Sub</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Request Sub SerialNo: &quot;</span> <span class="token operator">&lt;&lt;</span> m_SubSerialNo <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnReply_Sub</span><span class="token punctuation">(</span>moomoo<span class="token double-colon punctuation">::</span>u32_t nSerialNo<span class="token punctuation">,</span> <span class="token keyword">const</span> Qot_Sub<span class="token double-colon punctuation">::</span>Response <span class="token operator">&amp;</span>stRsp<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nSerialNo <span class="token operator">==</span> m_SubSerialNo<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;OnReply_Sub SerialNo: &quot;</span> <span class="token operator">&lt;&lt;</span> nSerialNo <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>stRsp<span class="token punctuation">.</span><span class="token function">rettype</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> Common<span class="token double-colon punctuation">::</span>RetType<span class="token double-colon punctuation">::</span>RetType_Succeed<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Sub Failed&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>        

			<span class="token comment">// construct request message</span>
            Qot_GetBasicQot<span class="token double-colon punctuation">::</span>Request req<span class="token punctuation">;</span>
            Qot_GetBasicQot<span class="token double-colon punctuation">::</span>C2S <span class="token operator">*</span>c2s <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">mutable_c2s</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">auto</span> secList <span class="token operator">=</span> c2s<span class="token operator">-&gt;</span><span class="token function">mutable_securitylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Qot_Common<span class="token double-colon punctuation">::</span>Security <span class="token operator">*</span>sec <span class="token operator">=</span> secList<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sec<span class="token operator">-&gt;</span><span class="token function">set_code</span><span class="token punctuation">(</span><span class="token string">&quot;00700&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sec<span class="token operator">-&gt;</span><span class="token function">set_market</span><span class="token punctuation">(</span>Qot_Common<span class="token double-colon punctuation">::</span>QotMarket<span class="token double-colon punctuation">::</span>QotMarket_HK_Security<span class="token punctuation">)</span><span class="token punctuation">;</span>

            m_GetBasicQotSerialNo <span class="token operator">=</span> m_pQotApi<span class="token operator">-&gt;</span><span class="token function">GetBasicQot</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Request GetBasicQot SerialNo: &quot;</span> <span class="token operator">&lt;&lt;</span> m_GetBasicQotSerialNo <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">OnReply_GetBasicQot</span><span class="token punctuation">(</span>moomoo<span class="token double-colon punctuation">::</span>u32_t nSerialNo<span class="token punctuation">,</span> <span class="token keyword">const</span> Qot_GetBasicQot<span class="token double-colon punctuation">::</span>Response <span class="token operator">&amp;</span>stRsp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>nSerialNo <span class="token operator">==</span> m_GetBasicQotSerialNo<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;OnReply_GetBasicQot SerialNo: &quot;</span> <span class="token operator">&lt;&lt;</span> nSerialNo <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> 
			<span class="token comment">// print response</span>
			<span class="token comment">// ProtoBufToBodyData and UTF8ToLocal refer to tool.h in Samples</span>
            string resp_str<span class="token punctuation">;</span>
            <span class="token function">ProtoBufToBodyData</span><span class="token punctuation">(</span>stRsp<span class="token punctuation">,</span> resp_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token function">UTF8ToLocal</span><span class="token punctuation">(</span>resp_str<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
	MMAPI_Qot <span class="token operator">*</span>m_pQotApi<span class="token punctuation">;</span>

    moomoo<span class="token double-colon punctuation">::</span>u32_t m_SubSerialNo<span class="token punctuation">;</span>
    moomoo<span class="token double-colon punctuation">::</span>u32_t m_GetBasicQotSerialNo<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int32_t</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int32_t</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">MMAPI</span><span class="token double-colon punctuation">::</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token punctuation">{</span>
		Program program<span class="token punctuation">;</span>
		program<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	protobuf<span class="token double-colon punctuation">::</span><span class="token function">ShutdownProtobufLibrary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">MMAPI</span><span class="token double-colon punctuation">::</span><span class="token function">UnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>connect
Request Sub SerialNo: 3
OnReply_Sub SerialNo: 3
Request GetBasicQot SerialNo: 4
OnReply_GetBasicQot SerialNo: 4
{
 &quot;retType&quot;: 0,
 &quot;retMsg&quot;: &quot;&quot;,
 &quot;errCode&quot;: 0,
 &quot;s2c&quot;: {
  &quot;basicQotList&quot;: [
   {
    &quot;security&quot;: {
     &quot;market&quot;: 1,
     &quot;code&quot;: &quot;00700&quot;
    },
    &quot;isSuspended&quot;: false,
    &quot;listTime&quot;: &quot;2004-06-16&quot;,
    &quot;priceSpread&quot;: 0.5,
    &quot;updateTime&quot;: &quot;2021-06-09 14:08:24&quot;,
    &quot;highPrice&quot;: 606,
    &quot;openPrice&quot;: 600,
    &quot;lowPrice&quot;: 597.5,
    &quot;curPrice&quot;: 601.5,
    &quot;lastClosePrice&quot;: 601,
    &quot;volume&quot;: &quot;4283211&quot;,
    &quot;turnover&quot;: 2579419163,
    &quot;turnoverRate&quot;: 0.045,
    &quot;amplitude&quot;: 1.414,
    &quot;darkStatus&quot;: 0,
    &quot;listTimestamp&quot;: 1087315200,
    &quot;updateTimestamp&quot;: 1623218904,
    &quot;secStatus&quot;: 1
   }
  ]
 }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></div><div class="tab-content" style="display:none;"><h2 id="4159-8"><a href="#4159-8" class="header-anchor">#</a> Sub</h2> <p><code>Sub(req);</code></p> <ul><li><p><strong>Description</strong></p> <p>To subscribe to the real-time information required for registration, specify the stock and subscription data types.</p></li> <li><p><strong>Parameters</strong></p></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">C2S</span>
<span class="token punctuation">{</span>
    <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Qot_Common<span class="token punctuation">.</span>Security</span> securityList <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// List of security</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> subTypeList <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.SubType, list of subscription data type</span>
    <span class="token keyword">required</span> <span class="token builtin">bool</span> isSubOrUnSub <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">//true means subscribe, false means unsubscribe</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isRegOrUnRegPush <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">//Whether to register or unregister the push of the market quotation above the link, this parameter does not specify that no registration or unregistration operation will be performed</span>
    <span class="token keyword">repeated</span> <span class="token builtin">int32</span> regPushRehabTypeList <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//Qot_Common.RehabType, the type of adjustment, it takes effect when registered push and candlestick type, other subscription types ignore this parameter. This parameter does not specify the default adjust forward when registering candlestick push</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isFirstPush <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span> <span class="token comment">//After registration, if the local data is the first push of the existing data, the default is true if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isUnsubAll <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> <span class="token comment">//One-click cancel all subscriptions currently connected, and ignore other parameters when it is set to True.</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> isSubOrderBookDetail <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token comment">//Subscription display is available, whether to subscribe to display details, only supports SF market, the default is false if this parameter is not specified</span>
    <span class="token keyword">optional</span> <span class="token builtin">bool</span> extendedTime <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow pre-market and after-hours data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> session <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// Whether to allow outside regular trading data of US stocks (only used to subscribe to real-time candlestick and real-time Time Frame of US stocks)</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Request</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token positional-class-name class-name">C2S</span> c2s <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><ul><li>For stock structure, refer to <a href="/moomoo-api-doc/en/quote/quote.html#5792">Security</a></li> <li>For the subscription data type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a></li> <li>For stock adjustment type, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7071">RehabType</a></li></ul></blockquote> <ul><li><strong>Return</strong></li></ul> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code>
<span class="token keyword">message</span> <span class="token class-name">S2C</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">Response</span>
<span class="token punctuation">{</span>
    <span class="token keyword">required</span> <span class="token builtin">int32</span> retType <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">[</span><span class="token annotation">default</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//RetType, returned value</span>
    <span class="token keyword">optional</span> <span class="token builtin">string</span> retMsg <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">optional</span> <span class="token builtin">int32</span> errCode <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

    <span class="token keyword">optional</span> <span class="token positional-class-name class-name">S2C</span> s2c <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><ul><li>For interface result, refer to <a href="/moomoo-api-doc/en/ftapi/common.html#8800">RetType</a></li></ul></blockquote> <ul><li><strong>Example</strong></li></ul> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> mmWebsocket <span class="token keyword">from</span> <span class="token string">&quot;moomoo-api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mmCmdID <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;moomoo-api&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Common<span class="token punctuation">,</span> Qot_Common <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;moomoo-api/proto&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> RetType <span class="token punctuation">}</span> <span class="token operator">=</span> Common
    <span class="token keyword">const</span> <span class="token punctuation">{</span> SubType<span class="token punctuation">,</span> QotMarket <span class="token punctuation">}</span> <span class="token operator">=</span> Qot_Common
    <span class="token keyword">let</span> <span class="token punctuation">[</span>addr<span class="token punctuation">,</span> port<span class="token punctuation">,</span> enable_ssl<span class="token punctuation">,</span> key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">33333</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">'XXXXX'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> websocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mmWebsocket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    websocket<span class="token punctuation">.</span><span class="token function-variable function">onlogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">ret<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> req <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">c2s</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">securityList</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token literal-property property">market</span><span class="token operator">:</span> QotMarket<span class="token punctuation">.</span>QotMarket_HK_Security<span class="token punctuation">,</span>
                        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">&quot;00700&quot;</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token literal-property property">subTypeList</span><span class="token operator">:</span> <span class="token punctuation">[</span> SubType<span class="token punctuation">.</span>SubType_OrderBook <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Subscription OrderBook data</span>
                <span class="token literal-property property">isSubOrUnSub</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
                <span class="token literal-property property">isRegOrUnRegPush</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span> 

            websocket<span class="token punctuation">.</span><span class="token function">Sub</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span> <span class="token comment">//# Subscribe to the order type, OpenD starts to receive continuous push from the server</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
                <span class="token keyword">let</span> <span class="token punctuation">{</span> errCode<span class="token punctuation">,</span> retMsg<span class="token punctuation">,</span> retType <span class="token punctuation">}</span> <span class="token operator">=</span> res
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;subscribe: errCode %d, retMsg %s, retType %d&quot;</span><span class="token punctuation">,</span> errCode<span class="token punctuation">,</span> retMsg<span class="token punctuation">,</span> retType<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;retMsg&quot;</span> <span class="token keyword">in</span> error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error:&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>retMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    websocket<span class="token punctuation">.</span><span class="token function-variable function">onPush</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">cmd<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>mmCmdID<span class="token punctuation">.</span>QotUpdateOrderBook<span class="token punctuation">.</span>cmd <span class="token operator">==</span> cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> <span class="token punctuation">{</span> retType<span class="token punctuation">,</span> s2c <span class="token punctuation">}</span> <span class="token operator">=</span> res
            <span class="token keyword">if</span><span class="token punctuation">(</span>retType <span class="token operator">==</span> RetType<span class="token punctuation">.</span>RetType_Succeed<span class="token punctuation">)</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;OrderBookTest&quot;</span><span class="token punctuation">,</span> s2c<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;OrderBookTest: error&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    websocket<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> port<span class="token punctuation">,</span> enable_ssl<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// After using the connection, remember to close it to prevent the number of connections from running out</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
        websocket<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set the script to receive OpenD push duration to 5 seconds</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><ul><li><strong>Output</strong></li></ul> <div class="language-JavaScript line-numbers-mode"><pre class="language-javascript"><code><span class="token literal-property property">subscribe</span><span class="token operator">:</span> errCode <span class="token number">0</span><span class="token punctuation">,</span> retMsg <span class="token punctuation">,</span> retType <span class="token number">0</span>
OrderBookTest <span class="token punctuation">{</span><span class="token string-property property">&quot;security&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;market&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">&quot;code&quot;</span><span class="token operator">:</span><span class="token string">&quot;00700&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orderBookAskList&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">492.6</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;32300&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">55</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">492.8</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;14100&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">16</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">493</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;25200&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">493.2</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;12300&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">11</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">493.4</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;9000&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">493.6</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;13500&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">493.8</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;9800&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">494</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;10500&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">494.2</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;6100&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">494.4</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;11400&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orderBookBidList&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">492.4</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;30600&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">59</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">492.2</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;29800&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">49</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">492</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;97900&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">120</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">491.8</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;24700&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">55</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">491.6</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;35300&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">50</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">491.4</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;11200&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">491.2</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;29300&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">39</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">491</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;77900&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">229</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">490.8</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;14100&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">39</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">490.6</span><span class="token punctuation">,</span><span class="token string-property property">&quot;volume&quot;</span><span class="token operator">:</span><span class="token string">&quot;22800&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;orederCount&quot;</span><span class="token operator">:</span><span class="token number">34</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
OrderBookTest <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token operator">...</span>
<span class="token operator">...</span>
stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div> <div class="custom-block tip"><p class="custom-block-title">Interface Limitations</p> <ul><li>Supports subscriptions of multiple real-time data types, refer to <a href="/moomoo-api-doc/en/quote/quote.html#7721">SubType</a>, each stock subscription for one one quota.</li> <li>Please refer to <a href="/moomoo-api-doc/en/intro/authority.html#9123">Subscription Quota &amp; Historical Candlestick Quota</a> for Subscription Quota rules.</li> <li>You can unsubscribe after subscribing after at least one minute.</li> <li>Due to the large amount of SF market data in Hong Kong stocks, in order to ensure the speed of the SF market and the processing performance of OpenD, currently SF authorized users are restricted to subscribing to the order book and broker queue of only 50 securities products (including hkex stocks, warrants, bulls and bears) at the same time, the remaining subscription quota can still be used to subscribe to other types, such as: tickers and brokerage etc.</li> <li>HK options and futures do not support subscription to <em>TICKER</em> type under LV1 authority.</li></ul></div></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/moomoo-api-doc/en/quote/base.html" class="prev">
        Quote Object
      </a></span> <span class="next"><a href="/moomoo-api-doc/en/quote/query-subscription.html">
        Get Subscription Status
      </a>
      →
    </span></p></div> </main> <aside class="rightbar"><ul class="rightbar-links"><a href="/moomoo-api-doc/en/quote/sub.html" aria-current="page" class="active rightbar-link">Subscribe and Unsubscribe</a></ul></aside></div><div class="global-ui"></div></div>
    <script src="/moomoo-api-doc/assets/js/app.76d125c0.js" defer></script><script src="/moomoo-api-doc/assets/js/2.e1858e4a.js" defer></script><script src="/moomoo-api-doc/assets/js/78.3eaa2d23.js" defer></script><script src="/moomoo-api-doc/assets/js/28.3fe3716c.js" defer></script><script src="/moomoo-api-doc/assets/js/35.424be492.js" defer></script><script src="/moomoo-api-doc/assets/js/24.9af08641.js" defer></script>
  </body>
</html>
